<!DOCTYPE html>

<html lang="en">

<head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=no">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black">
    <meta name="mobile-web-app-capable" content="yes">
    <title>
        DBMS Lecture 8-  Indexing: - HackMD
    </title>
    <link rel="icon" type="image/png" href="https://hackmd.io/favicon.png">
    <link rel="apple-touch-icon" href="https://hackmd.io/apple-touch-icon.png">

    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.3.7/css/bootstrap.min.css" integrity="sha256-916EbMg70RQy9LHiGkXzG8hSg9EdNy97GazNG/aiY1w=" crossorigin="anonymous" />
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css" integrity="sha256-eZrrJcwDc/3uDhsdt61sL2oOBY362qM3lon1gyExkL0=" crossorigin="anonymous" />
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/ionicons/2.0.1/css/ionicons.min.css" integrity="sha256-3iu9jgsy9TpTwXKb7bNQzqWekRX7pPK+2OLj3R922fo=" crossorigin="anonymous" />
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/octicons/3.5.0/octicons.min.css" integrity="sha256-QiWfLIsCT02Sdwkogf6YMiQlj4NE84MKkzEMkZnMGdg=" crossorigin="anonymous" />
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/prism/1.5.1/themes/prism.min.css" integrity="sha256-vtR0hSWRc3Tb26iuN2oZHt3KRUomwTufNIf5/4oeCyg=" crossorigin="anonymous" />
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@hackmd/emojify.js@2.1.0/dist/css/basic/emojify.min.css" integrity="sha256-UOrvMOsSDSrW6szVLe8ZDZezBxh5IoIfgTwdNDgTjiU=" crossorigin="anonymous" />
    <style>
        @import url(https://fonts.googleapis.com/css?family=Roboto:300,300i,400,400i,500,500i|Source+Code+Pro:300,400,500|Source+Sans+Pro:300,300i,400,400i,600,600i|Source+Serif+Pro&subset=latin-ext);.hljs{background:#fff;color:#333;display:block;overflow-x:auto;padding:.5em}.hljs-comment,.hljs-meta{color:#969896}.hljs-emphasis,.hljs-quote,.hljs-string,.hljs-strong,.hljs-template-variable,.hljs-variable{color:#df5000}.hljs-keyword,.hljs-selector-tag,.hljs-type{color:#a71d5d}.hljs-attribute,.hljs-bullet,.hljs-literal,.hljs-number,.hljs-symbol{color:#0086b3}.hljs-built_in,.hljs-builtin-name{color:#005cc5}.hljs-name,.hljs-section{color:#63a35c}.hljs-tag{color:#333}.hljs-attr,.hljs-selector-attr,.hljs-selector-class,.hljs-selector-id,.hljs-selector-pseudo,.hljs-title{color:#795da3}.hljs-addition{background-color:#eaffea;color:#55a532}.hljs-deletion{background-color:#ffecec;color:#bd2c00}.hljs-link{text-decoration:underline}.markdown-body{word-wrap:break-word;font-size:16px;line-height:1.5}.markdown-body:after,.markdown-body:before{content:"";display:table}.markdown-body:after{clear:both}.markdown-body>:first-child{margin-top:0!important}.markdown-body>:last-child{margin-bottom:0!important}.markdown-body a:not([href]){color:inherit;text-decoration:none}.markdown-body .absent{color:#c00}.markdown-body .anchor{float:left;line-height:1;margin-left:-20px;padding-right:4px}.markdown-body .anchor:focus{outline:none}.markdown-body blockquote,.markdown-body dl,.markdown-body ol,.markdown-body p,.markdown-body pre,.markdown-body table,.markdown-body ul{margin-bottom:16px;margin-top:0}.markdown-body hr{background-color:#e7e7e7;border:0;height:.25em;margin:24px 0;padding:0}.markdown-body blockquote{border-left:.25em solid #ddd;color:#777;font-size:16px;padding:0 1em}.markdown-body blockquote>:first-child{margin-top:0}.markdown-body blockquote>:last-child{margin-bottom:0}.markdown-body kbd,.popover kbd{background-color:#fcfcfc;border:1px solid;border-color:#ccc #ccc #bbb;border-radius:3px;box-shadow:inset 0 -1px 0 #bbb;color:#555;display:inline-block;font-size:11px;line-height:10px;padding:3px 5px;vertical-align:middle}.markdown-body .loweralpha{list-style-type:lower-alpha}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{font-weight:600;line-height:1.25;margin-bottom:16px;margin-top:24px}.markdown-body h1 .octicon-link,.markdown-body h2 .octicon-link,.markdown-body h3 .octicon-link,.markdown-body h4 .octicon-link,.markdown-body h5 .octicon-link,.markdown-body h6 .octicon-link{color:#000;vertical-align:middle;visibility:hidden}.markdown-body h1:hover .anchor,.markdown-body h2:hover .anchor,.markdown-body h3:hover .anchor,.markdown-body h4:hover .anchor,.markdown-body h5:hover .anchor,.markdown-body h6:hover .anchor{text-decoration:none}.markdown-body h1:hover .anchor .octicon-link,.markdown-body h2:hover .anchor .octicon-link,.markdown-body h3:hover .anchor .octicon-link,.markdown-body h4:hover .anchor .octicon-link,.markdown-body h5:hover .anchor .octicon-link,.markdown-body h6:hover .anchor .octicon-link{visibility:visible}.markdown-body h1 code,.markdown-body h1 tt,.markdown-body h2 code,.markdown-body h2 tt,.markdown-body h3 code,.markdown-body h3 tt,.markdown-body h4 code,.markdown-body h4 tt,.markdown-body h5 code,.markdown-body h5 tt,.markdown-body h6 code,.markdown-body h6 tt{font-size:inherit}.markdown-body h1{font-size:2em}.markdown-body h1,.markdown-body h2{border-bottom:1px solid #eee;padding-bottom:.3em}.markdown-body h2{font-size:1.5em}.markdown-body h3{font-size:1.25em}.markdown-body h4{font-size:1em}.markdown-body h5{font-size:.875em}.markdown-body h6{color:#777;font-size:.85em}.markdown-body ol,.markdown-body ul{padding-left:2em}.markdown-body ol.no-list,.markdown-body ul.no-list{list-style-type:none;padding:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-bottom:0;margin-top:0}.markdown-body li>p{margin-top:16px}.markdown-body li+li{padding-top:.25em}.markdown-body dl{padding:0}.markdown-body dl dt{font-size:1em;font-style:italic;font-weight:700;margin-top:16px;padding:0}.markdown-body dl dd{margin-bottom:16px;padding:0 16px}.markdown-body table{display:block;overflow:auto;width:100%;word-break:normal;word-break:keep-all}.markdown-body table th{font-weight:700}.markdown-body table td,.markdown-body table th{border:1px solid #ddd;padding:6px 13px}.markdown-body table tr{background-color:#fff;border-top:1px solid #ccc}.markdown-body table tr:nth-child(2n){background-color:#f8f8f8}.markdown-body img{background-color:#fff;box-sizing:initial;max-width:100%}.markdown-body img[align=right]{padding-left:20px}.markdown-body img[align=left]{padding-right:20px}.markdown-body .emoji{background-color:initial;max-width:none;vertical-align:text-top}.markdown-body span.frame{display:block;overflow:hidden}.markdown-body span.frame>span{border:1px solid #ddd;display:block;float:left;margin:13px 0 0;overflow:hidden;padding:7px;width:auto}.markdown-body span.frame span img{display:block;float:left}.markdown-body span.frame span span{clear:both;color:#333;display:block;padding:5px 0 0}.markdown-body span.align-center{clear:both;display:block;overflow:hidden}.markdown-body span.align-center>span{display:block;margin:13px auto 0;overflow:hidden;text-align:center}.markdown-body span.align-center span img{margin:0 auto;text-align:center}.markdown-body span.align-right{clear:both;display:block;overflow:hidden}.markdown-body span.align-right>span{display:block;margin:13px 0 0;overflow:hidden;text-align:right}.markdown-body span.align-right span img{margin:0;text-align:right}.markdown-body span.float-left{display:block;float:left;margin-right:13px;overflow:hidden}.markdown-body span.float-left span{margin:13px 0 0}.markdown-body span.float-right{display:block;float:right;margin-left:13px;overflow:hidden}.markdown-body span.float-right>span{display:block;margin:13px auto 0;overflow:hidden;text-align:right}.markdown-body code,.markdown-body tt{background-color:#0000000a;border-radius:3px;font-size:85%;margin:0;padding:.2em 0}.markdown-body code:after,.markdown-body code:before,.markdown-body tt:after,.markdown-body tt:before{content:"\00a0";letter-spacing:-.2em}.markdown-body code br,.markdown-body tt br{display:none}.markdown-body del code{text-decoration:inherit}.markdown-body pre{word-wrap:normal}.markdown-body pre>code{background:#0000;border:0;font-size:100%;margin:0;padding:0;white-space:pre;word-break:normal}.markdown-body .highlight{margin-bottom:16px}.markdown-body .highlight pre{margin-bottom:0;word-break:normal}.markdown-body .highlight pre,.markdown-body pre{background-color:#f7f7f7;border-radius:3px;font-size:85%;line-height:1.45;overflow:auto;padding:16px}.markdown-body pre code,.markdown-body pre tt{word-wrap:normal;background-color:initial;border:0;display:inline;line-height:inherit;margin:0;max-width:auto;overflow:visible;padding:0}.markdown-body pre code:after,.markdown-body pre code:before,.markdown-body pre tt:after,.markdown-body pre tt:before{content:normal}.markdown-body .csv-data td,.markdown-body .csv-data th{font-size:12px;line-height:1;overflow:hidden;padding:5px;text-align:left;white-space:nowrap}.markdown-body .csv-data .blob-line-num{background:#fff;border:0;padding:10px 8px 9px;text-align:right}.markdown-body .csv-data tr{border-top:0}.markdown-body .csv-data th{background:#f8f8f8;border-top:0;font-weight:700}.news .alert .markdown-body blockquote{border:0;padding:0 0 0 40px}.activity-tab .news .alert .commits,.activity-tab .news .markdown-body blockquote{padding-left:0}.task-list-item{list-style-type:none}.task-list-item label{font-weight:400}.task-list-item.enabled label{cursor:pointer}.task-list-item+.task-list-item{margin-top:3px}.task-list-item-checkbox{cursor:default!important;float:left;margin:.31em 0 .2em -1.3em!important;vertical-align:middle}.markdown-body{max-width:758px;overflow:visible!important;padding-bottom:40px;padding-top:40px;position:relative}.markdown-body .emoji{vertical-align:top}.markdown-body pre{border:inherit!important}.markdown-body code{color:inherit!important}.markdown-body pre code .wrapper{display:-moz-inline-flex;display:-ms-inline-flex;display:-o-inline-flex;display:inline-flex}.markdown-body pre code .gutter{float:left;overflow:hidden;-webkit-user-select:none;user-select:none}.markdown-body pre code .gutter.linenumber{border-right:3px solid #6ce26c!important;box-sizing:initial;color:#afafaf!important;cursor:default;display:inline-block;min-width:20px;padding:0 8px 0 0;position:relative;text-align:right;z-index:4}.markdown-body pre code .gutter.linenumber>span:before{content:attr(data-linenumber)}.markdown-body pre code .code{float:left;margin:0 0 0 16px}.markdown-body .gist .line-numbers{border-bottom:none;border-left:none;border-top:none}.markdown-body .gist .line-data{border:none}.markdown-body .gist table{border-collapse:inherit!important;border-spacing:0}.markdown-body code[data-gist-id]{background:none;padding:0}.markdown-body code[data-gist-id]:after,.markdown-body code[data-gist-id]:before{content:""}.markdown-body code[data-gist-id] .blob-num{border:unset}.markdown-body code[data-gist-id] table{margin-bottom:unset;overflow:unset}.markdown-body code[data-gist-id] table tr{background:unset}.markdown-body[dir=rtl] pre{direction:ltr}.markdown-body[dir=rtl] code{direction:ltr;unicode-bidi:embed}.markdown-body .alert>p:last-child{margin-bottom:0}.markdown-body pre.abc,.markdown-body pre.flow-chart,.markdown-body pre.graphviz,.markdown-body pre.mermaid,.markdown-body pre.sequence-diagram,.markdown-body pre.vega{background-color:inherit;border-radius:0;overflow:visible;text-align:center;white-space:inherit}.markdown-body pre.abc>code,.markdown-body pre.flow-chart>code,.markdown-body pre.graphviz>code,.markdown-body pre.mermaid>code,.markdown-body pre.sequence-diagram>code,.markdown-body pre.vega>code{text-align:left}.markdown-body pre.abc>svg,.markdown-body pre.flow-chart>svg,.markdown-body pre.graphviz>svg,.markdown-body pre.mermaid>svg,.markdown-body pre.sequence-diagram>svg,.markdown-body pre.vega>svg{height:100%;max-width:100%}.markdown-body pre>code.wrap{word-wrap:break-word;white-space:pre-wrap;white-space:-moz-pre-wrap;white-space:-pre-wrap;white-space:-o-pre-wrap}.markdown-body .alert>p:last-child,.markdown-body .alert>ul:last-child{margin-bottom:0}.markdown-body summary{display:list-item}.markdown-body summary:focus{outline:none}.markdown-body details summary{cursor:pointer}.markdown-body details:not([open])>:not(summary){display:none}.markdown-body figure{margin:1em 40px}.markdown-body .mark,.markdown-body mark{background-color:#fff1a7}.vimeo,.youtube{background-color:#000;background-position:50%;background-repeat:no-repeat;background-size:contain;cursor:pointer;display:table;overflow:hidden;text-align:center}.vimeo,.youtube{position:relative;width:100%}.youtube{padding-bottom:56.25%}.vimeo img{object-fit:contain;width:100%;z-index:0}.youtube img{object-fit:cover;z-index:0}.vimeo iframe,.youtube iframe,.youtube img{height:100%;left:0;position:absolute;top:0;width:100%}.vimeo iframe,.youtube iframe{vertical-align:middle;z-index:1}.vimeo .icon,.youtube .icon{color:#fff;height:auto;left:50%;opacity:.3;position:absolute;top:50%;transform:translate(-50%,-50%);transition:opacity .2s;width:auto;z-index:0}.vimeo:hover .icon,.youtube:hover .icon{opacity:.6;transition:opacity .2s}.slideshare .inner,.speakerdeck .inner{position:relative;width:100%}.slideshare .inner iframe,.speakerdeck .inner iframe{bottom:0;height:100%;left:0;position:absolute;right:0;top:0;width:100%}.figma{display:table;padding-bottom:56.25%;position:relative;width:100%}.figma iframe{border:1px solid #eee;bottom:0;height:100%;left:0;position:absolute;right:0;top:0;width:100%}.markmap-container{height:300px}.markmap-container>svg{height:100%;width:100%}.MJX_Assistive_MathML{display:none}#MathJax_Message{z-index:1000!important}.ui-infobar{color:#777;margin:25px auto -25px;max-width:760px;position:relative;z-index:2}.toc .invisable-node{list-style-type:none}.ui-toc{bottom:20px;position:fixed;z-index:998}.ui-toc.both-mode{margin-left:8px}.ui-toc.both-mode .ui-toc-label{border-bottom-left-radius:0;border-top-left-radius:0;height:40px;padding:10px 4px}.ui-toc-label{background-color:#e6e6e6;border:none;color:#868686;transition:opacity .2s}.ui-toc .open .ui-toc-label{color:#fff;opacity:1;transition:opacity .2s}.ui-toc-label:focus{background-color:#ccc;color:#000;opacity:.3}.ui-toc-label:hover{background-color:#ccc;opacity:1;transition:opacity .2s}.ui-toc-dropdown{margin-bottom:20px;margin-top:20px;max-height:70vh;max-width:45vw;overflow:auto;padding-left:10px;padding-right:10px;text-align:inherit;width:25vw}.ui-toc-dropdown>.toc{max-height:calc(70vh - 100px);overflow:auto}.ui-toc-dropdown[dir=rtl] .nav{letter-spacing:.0029em;padding-right:0}.ui-toc-dropdown a{overflow:hidden;text-overflow:ellipsis;white-space:pre}.ui-toc-dropdown .nav>li>a{color:#767676;display:block;font-size:13px;font-weight:500;padding:4px 20px}.ui-toc-dropdown .nav>li:first-child:last-child>ul,.ui-toc-dropdown .toc.expand ul{display:block}.ui-toc-dropdown .nav>li>a:focus,.ui-toc-dropdown .nav>li>a:hover{background-color:initial;border-left:1px solid #000;color:#000;padding-left:19px;text-decoration:none}.ui-toc-dropdown[dir=rtl] .nav>li>a:focus,.ui-toc-dropdown[dir=rtl] .nav>li>a:hover{border-left:none;border-right:1px solid #000;padding-right:19px}.ui-toc-dropdown .nav>.active:focus>a,.ui-toc-dropdown .nav>.active:hover>a,.ui-toc-dropdown .nav>.active>a{background-color:initial;border-left:2px solid #000;color:#000;font-weight:700;padding-left:18px}.ui-toc-dropdown[dir=rtl] .nav>.active:focus>a,.ui-toc-dropdown[dir=rtl] .nav>.active:hover>a,.ui-toc-dropdown[dir=rtl] .nav>.active>a{border-left:none;border-right:2px solid #000;padding-right:18px}.ui-toc-dropdown .nav .nav{display:none;padding-bottom:10px}.ui-toc-dropdown .nav>.active>ul{display:block}.ui-toc-dropdown .nav .nav>li>a{font-size:12px;font-weight:400;padding-bottom:1px;padding-left:30px;padding-top:1px}.ui-toc-dropdown[dir=rtl] .nav .nav>li>a{padding-right:30px}.ui-toc-dropdown .nav .nav>li>ul>li>a{font-size:12px;font-weight:400;padding-bottom:1px;padding-left:40px;padding-top:1px}.ui-toc-dropdown[dir=rtl] .nav .nav>li>ul>li>a{padding-right:40px}.ui-toc-dropdown .nav .nav>li>a:focus,.ui-toc-dropdown .nav .nav>li>a:hover{padding-left:29px}.ui-toc-dropdown[dir=rtl] .nav .nav>li>a:focus,.ui-toc-dropdown[dir=rtl] .nav .nav>li>a:hover{padding-right:29px}.ui-toc-dropdown .nav .nav>li>ul>li>a:focus,.ui-toc-dropdown .nav .nav>li>ul>li>a:hover{padding-left:39px}.ui-toc-dropdown[dir=rtl] .nav .nav>li>ul>li>a:focus,.ui-toc-dropdown[dir=rtl] .nav .nav>li>ul>li>a:hover{padding-right:39px}.ui-toc-dropdown .nav .nav>.active:focus>a,.ui-toc-dropdown .nav .nav>.active:hover>a,.ui-toc-dropdown .nav .nav>.active>a{font-weight:500;padding-left:28px}.ui-toc-dropdown[dir=rtl] .nav .nav>.active:focus>a,.ui-toc-dropdown[dir=rtl] .nav .nav>.active:hover>a,.ui-toc-dropdown[dir=rtl] .nav .nav>.active>a{padding-right:28px}.ui-toc-dropdown .nav .nav>.active>.nav>.active:focus>a,.ui-toc-dropdown .nav .nav>.active>.nav>.active:hover>a,.ui-toc-dropdown .nav .nav>.active>.nav>.active>a{font-weight:500;padding-left:38px}.ui-toc-dropdown[dir=rtl] .nav .nav>.active>.nav>.active:focus>a,.ui-toc-dropdown[dir=rtl] .nav .nav>.active>.nav>.active:hover>a,.ui-toc-dropdown[dir=rtl] .nav .nav>.active>.nav>.active>a{padding-right:38px}.markdown-body{font-family:-apple-system,BlinkMacSystemFont,Segoe UI,Helvetica Neue,Helvetica,Roboto,Arial,sans-serif,Apple Color Emoji,Segoe UI Emoji,Segoe UI Symbol}html[lang^=ja] .markdown-body{font-family:-apple-system,BlinkMacSystemFont,Segoe UI,Helvetica Neue,Helvetica,Roboto,Arial,Hiragino Kaku Gothic Pro,ヒラギノ角ゴ Pro W3,Osaka,Meiryo,メイリオ,MS Gothic,ＭＳ ゴシック,sans-serif,Apple Color Emoji,Segoe UI Emoji,Segoe UI Symbol}html[lang=zh-tw] .markdown-body{font-family:-apple-system,BlinkMacSystemFont,Segoe UI,Helvetica Neue,Helvetica,Roboto,Arial,PingFang TC,Microsoft JhengHei,微軟正黑,sans-serif,Apple Color Emoji,Segoe UI Emoji,Segoe UI Symbol}html[lang=zh-cn] .markdown-body{font-family:-apple-system,BlinkMacSystemFont,Segoe UI,Helvetica Neue,Helvetica,Roboto,Arial,PingFang SC,Microsoft YaHei,微软雅黑,sans-serif,Apple Color Emoji,Segoe UI Emoji,Segoe UI Symbol}html .markdown-body[lang^=ja]{font-family:-apple-system,BlinkMacSystemFont,Segoe UI,Helvetica Neue,Helvetica,Roboto,Arial,Hiragino Kaku Gothic Pro,ヒラギノ角ゴ Pro W3,Osaka,Meiryo,メイリオ,MS Gothic,ＭＳ ゴシック,sans-serif,Apple Color Emoji,Segoe UI Emoji,Segoe UI Symbol}html .markdown-body[lang=zh-tw]{font-family:-apple-system,BlinkMacSystemFont,Segoe UI,Helvetica Neue,Helvetica,Roboto,Arial,PingFang TC,Microsoft JhengHei,微軟正黑,sans-serif,Apple Color Emoji,Segoe UI Emoji,Segoe UI Symbol}html .markdown-body[lang=zh-cn]{font-family:-apple-system,BlinkMacSystemFont,Segoe UI,Helvetica Neue,Helvetica,Roboto,Arial,PingFang SC,Microsoft YaHei,微软雅黑,sans-serif,Apple Color Emoji,Segoe UI Emoji,Segoe UI Symbol}html[lang^=ja] .ui-toc-dropdown{font-family:Source Sans Pro,Helvetica,Arial,Meiryo UI,MS PGothic,ＭＳ Ｐゴシック,sans-serif}html[lang=zh-tw] .ui-toc-dropdown{font-family:Source Sans Pro,Helvetica,Arial,Microsoft JhengHei UI,微軟正黑UI,sans-serif}html[lang=zh-cn] .ui-toc-dropdown{font-family:Source Sans Pro,Helvetica,Arial,Microsoft YaHei UI,微软雅黑UI,sans-serif}html .ui-toc-dropdown[lang^=ja]{font-family:Source Sans Pro,Helvetica,Arial,Meiryo UI,MS PGothic,ＭＳ Ｐゴシック,sans-serif}html .ui-toc-dropdown[lang=zh-tw]{font-family:Source Sans Pro,Helvetica,Arial,Microsoft JhengHei UI,微軟正黑UI,sans-serif}html .ui-toc-dropdown[lang=zh-cn]{font-family:Source Sans Pro,Helvetica,Arial,Microsoft YaHei UI,微软雅黑UI,sans-serif}.ui-affix-toc{max-height:70vh;max-width:15vw;overflow:auto;position:fixed;top:0}.back-to-top,.expand-toggle,.go-to-bottom{color:#999;display:block;font-size:12px;font-weight:500;margin-left:10px;margin-top:10px;padding:4px 10px}.back-to-top:focus,.back-to-top:hover,.expand-toggle:focus,.expand-toggle:hover,.go-to-bottom:focus,.go-to-bottom:hover{color:#563d7c;text-decoration:none}.back-to-top,.go-to-bottom{margin-top:0}.ui-user-icon{background-position:50%;background-repeat:no-repeat;background-size:cover;border-radius:50%;display:block;height:20px;margin-bottom:2px;margin-right:5px;margin-top:2px;width:20px}.ui-user-icon.small{display:inline-block;height:18px;margin:0 0 .2em;vertical-align:middle;width:18px}.ui-infobar>small>span{line-height:22px}.ui-infobar>small .dropdown{display:inline-block}.ui-infobar>small .dropdown a:focus,.ui-infobar>small .dropdown a:hover{text-decoration:none}.ui-more-info{color:#888;cursor:pointer;vertical-align:middle}.ui-more-info .fa{font-size:16px}.ui-connectedGithub,.ui-published-note{color:#888}.ui-connectedGithub{line-height:23px;white-space:nowrap}.ui-connectedGithub a.file-path{color:#888;padding-left:22px;text-decoration:none}.ui-connectedGithub a.file-path:active,.ui-connectedGithub a.file-path:hover{color:#888;text-decoration:underline}.ui-connectedGithub .fa{font-size:20px}.ui-published-note .fa{font-size:20px;vertical-align:top}.unselectable{-webkit-user-select:none;-o-user-select:none;user-select:none}.selectable{-webkit-user-select:text;-o-user-select:text;user-select:text}.inline-spoiler-section{cursor:pointer}.inline-spoiler-section .spoiler-text{background-color:#333;border-radius:2px}.inline-spoiler-section .spoiler-text>*{opacity:0}.inline-spoiler-section .spoiler-img{filter:blur(10px)}.inline-spoiler-section.raw{background-color:#333;border-radius:2px}.inline-spoiler-section.raw>*{opacity:0}.inline-spoiler-section.unveil{cursor:auto}.inline-spoiler-section.unveil .spoiler-text{background-color:#3333331a}.inline-spoiler-section.unveil .spoiler-text>*{opacity:1}.inline-spoiler-section.unveil .spoiler-img{filter:none}@media print{blockquote,div,img,pre,table{page-break-inside:avoid!important}a[href]:after{font-size:12px!important}}.markdown-body.slides{color:#222;position:relative;z-index:1}.markdown-body.slides:before{background-color:currentColor;bottom:0;box-shadow:0 0 0 50vw;content:"";display:block;left:0;position:absolute;right:0;top:0;z-index:-1}.markdown-body.slides section[data-markdown]{background-color:#fff;margin-bottom:1.5em;position:relative;text-align:center}.markdown-body.slides section[data-markdown] code{text-align:left}.markdown-body.slides section[data-markdown]:before{content:"";display:block;padding-bottom:56.23%}.markdown-body.slides section[data-markdown]>div:first-child{left:1em;max-height:100%;overflow:hidden;position:absolute;right:1em;top:50%;transform:translateY(-50%)}.markdown-body.slides section[data-markdown]>ul{display:inline-block}.markdown-body.slides>section>section+section:after{border:3px solid #777;content:"";height:1.5em;position:absolute;right:1em;top:-1.5em}.site-ui-font{font-family:Source Sans Pro,Helvetica,Arial,sans-serif}html[lang^=ja] .site-ui-font{font-family:Source Sans Pro,Helvetica,Arial,Hiragino Kaku Gothic Pro,ヒラギノ角ゴ Pro W3,Osaka,Meiryo,メイリオ,MS Gothic,ＭＳ ゴシック,sans-serif}html[lang=zh-tw] .site-ui-font{font-family:Source Sans Pro,Helvetica,Arial,PingFang TC,Microsoft JhengHei,微軟正黑,sans-serif}html[lang=zh-cn] .site-ui-font{font-family:Source Sans Pro,Helvetica,Arial,PingFang SC,Microsoft YaHei,微软雅黑,sans-serif}body{font-smoothing:subpixel-antialiased!important;-webkit-font-smoothing:subpixel-antialiased!important;-moz-osx-font-smoothing:auto!important;-webkit-overflow-scrolling:touch;font-family:Source Sans Pro,Helvetica,Arial,sans-serif;letter-spacing:.025em}html[lang^=ja] body{font-family:Source Sans Pro,Helvetica,Arial,Hiragino Kaku Gothic Pro,ヒラギノ角ゴ Pro W3,Osaka,Meiryo,メイリオ,MS Gothic,ＭＳ ゴシック,sans-serif}html[lang=zh-tw] body{font-family:Source Sans Pro,Helvetica,Arial,PingFang TC,Microsoft JhengHei,微軟正黑,sans-serif}html[lang=zh-cn] body{font-family:Source Sans Pro,Helvetica,Arial,PingFang SC,Microsoft YaHei,微软雅黑,sans-serif}abbr[title]{border-bottom:none;text-decoration:underline;-webkit-text-decoration:underline dotted;text-decoration:underline dotted}abbr[data-original-title],abbr[title]{cursor:help}body.modal-open{overflow-y:auto;padding-right:0!important}svg{text-shadow:none}
    </style>
    <!-- HTML5 shim and Respond.js for IE8 support of HTML5 elements and media queries -->
    <!-- WARNING: Respond.js doesn't work if you view the page via file:// -->
    <!--[if lt IE 9]>
    	<script src="https://cdnjs.cloudflare.com/ajax/libs/html5shiv/3.7.3/html5shiv.min.js" integrity="sha256-3Jy/GbSLrg0o9y5Z5n1uw0qxZECH7C6OQpVBgNFYa0g=" crossorigin="anonymous"></script>
    	<script src="https://cdnjs.cloudflare.com/ajax/libs/respond.js/1.4.2/respond.min.js" integrity="sha256-g6iAfvZp+nDQ2TdTR/VVKJf3bGro4ub5fvWSWVRi2NE=" crossorigin="anonymous"></script>
		<script src="https://cdnjs.cloudflare.com/ajax/libs/es5-shim/4.5.9/es5-shim.min.js" integrity="sha256-8E4Is26QH0bD52WoQpcB+R/tcWQtpzlCojrybUd7Mxo=" crossorigin="anonymous"></script>
    <![endif]-->
</head>

<body>
    <div id="doc" class="markdown-body container-fluid comment-enabled" data-hard-breaks="true"><h1 id="DBMS-Lecture-8--Indexing" data-id="DBMS-Lecture-8--Indexing"><a class="anchor hidden-xs" href="#DBMS-Lecture-8--Indexing" title="DBMS-Lecture-8--Indexing"><span class="octicon octicon-link"></span></a><span>DBMS Lecture 8-  Indexing:</span></h1><div class="alert alert-info">
<p><strong><span>Agenda:</span></strong></p>
<ul>
<li><a href="##Introduction-to-Indexing:"><span>Introduction to Indexing:</span></a></li>
<li><a href="##Full-Text-Indexes:"><span>Full Text Indexes:</span></a></li>
<li><a href="##Composite-Indexes:"><span>Composite Indexes:</span></a></li>
</ul>
</div><h2 id="Introduction-to-Indexing" data-id="Introduction-to-Indexing"><a class="anchor hidden-xs" href="#Introduction-to-Indexing" title="Introduction-to-Indexing"><span class="octicon octicon-link"></span></a><span>Introduction to Indexing:</span></h2><p><span>As we all know, Databases store the data in Disk.</span><br>
<span>To understand it’s working,</span><br>
<span>Consider a students table,</span><br>
<img src="https://hackmd.io/_uploads/rys6L0irs.png" alt="" loading="lazy"></p><p><span>If we run a simple query,</span><br>
<code>select * from students where batch_id=2;</code></p><p><span>Internally, da</span><span class="ui-comment-inline-span">ta</span><span> will be brought into the RAM, then the query will run.</span></p><p><span>DBMS can’t directly operate on disk because CPU doesn’t work on the disk but first brings data to RAM and then works on it. CPU doesn’t work on the disk directly because d</span><span class="ui-comment-inline-span">isk is very slow compared to CPU.</span></p><p><span>Let’s understand </span><strong><span>Disk working:</span></strong><br>
<img src="https://i.imgur.com/aCfpYlC.png" alt="" loading="lazy"></p><p><span>By the nature of how disk works, it will be slower because we have to rotate a particular pointer till we reach to the correct place where data is stored then only we can read the data and send the data to CPU.</span></p><p><span>When we will try to read the data, it will give us the data of complete section and if the closer things are stored together we will get the data faster.</span></p><p><span>Let’s say, Students table is stored in the disk sorted by primary key.</span><br>
<img src="https://i.imgur.com/CfTJEbk.png" alt="" loading="lazy"><br>
<span>and the query is,</span></p><pre><code>select * 
from students 
where batch_id=2;
</code></pre><p><span>Assumption - there is only one row in a disk section.</span><br>
<span class="ui-comment-inline-span">The</span><span> very first operation that will happen is, the query executor will go to the disk and try to read the first row,it bring row1 to memory and checks if it matches the condition.</span><br>
<span>If not then bring row2 to memory similarly check the condition.</span><br>
<span>Then bring row3 to memory check the condition and do the work.</span></p><p><span>Now If there are multiple students that did not have the batch_id =2, then there will be many disk access which is very slow and will not even give the result.</span></p><p><span>Let’s imagine there are 1M rows, and there are only 20 students with batch_id=2, then there will be 1M-20 disk access that is waste for us.</span><br>
<span>Therefore we end up wasting a lot of memory and time in this.</span></p><p><span>L</span><span class="ui-comment-inline-span">et us consider another quer</span><span>y.</span></p><pre><code>select *
from students
where id=3;
</code></pre><p><span>By default, data is sorted by primary key.</span></p><p><span>Now we start going into the disk from first row, We bring the first row into memory and check if it matches with our condition or not. If not then bring the next row, then third row we keep on checking if it is relevant to us or not.</span></p><p><span>Now here in this condition query filter is there on the primary key where the id is 3, and if we get the id 3 in the table, now anything after this will not have id=3 because rows on disk are sorted by primary key i.e. id.</span><br>
<span>Therefore we don’t need to go to the entire table, we can stop our </span><span class="ui-comment-inline-span">search</span><span> once the condition is matched.</span></p><p><span class="ui-comment-inline-span">But the batch_id query (previous example) won’t improve, because sorting is on the basis of id i.e. primary key and not batch_i</span><span>d.</span></p><p><span>We can further improve searching on id via</span><span class="ui-comment-inline-span"> indexes or lookup tables.</span><br>
<span>In this students table all of these information is stored on the disk only therefore they will have section-a</span><span class="ui-comment-inline-span">ddress(We have address of the section that row lives in, one section may have more than one rows)</span><span>.</span><br>
<span class="ui-comment-inline-span">What if we have the following lookup table / index in RAM</span><span>,</span><br>
<img src="https://i.imgur.com/9pM8RGy.png" alt="" loading="lazy"><br>
<span>Then for this query,</span></p><pre><code>select *
from students
where id=3;
</code></pre><ol>
<li><span>Find the address of the id from memory.</span></li>
<li><span>Go to the address and fetch data.</span></li>
</ol><p><span>Here in this case, w</span><span class="ui-comment-inline-span">e don’t </span><span>even have to excess first 2 rows we know the address and we can </span><span class="ui-comment-inline-span">directly</span><span> go to that address and will just do 1 disk access and it’s done.</span></p><p><span>Let’s say there are 1M rows and we need to get a student with id=15.</span><br>
<strong><span>Case1:</span></strong><span> No sorting and No lookup table /</span><span class="ui-comment-inline-span"> inde</span><span>x.</span><br>
<span>Worst case is 1M rows.</span></p><p><strong><span>Case2:</span></strong><span> Have sorting but No lookup table / </span><span class="ui-comment-inline-span">index</span><span>.</span><br>
<span>Then 15 rows to access.</span></p><p><strong><span>Case3:</span></strong><span> Have sorting and Have lookup table / </span><span class="ui-comment-inline-span">index</span><span>.</span><br>
<span>Then only 1.</span></p><p><span>Let’s take another example, we have students table,</span><br>
<img src="https://i.imgur.com/bFAxQ56.png" alt="" loading="lazy"></p><pre><code>select *
from students
where p-No= 44667;
</code></pre><p><strong><span>V1:</span></strong><br>
<span>We can create a lookup table (index) which is sorted on phone </span><span class="ui-comment-inline-span">number</span><span>.</span><br>
<img src="https://i.imgur.com/wlu1Fsn.png" alt="" loading="lazy"></p><p><span>Now the working of this query is:</span></p><ol>
<li><span>Find the address of the p-No from memory.</span></li>
<li><span>Go to the address and fetch data.</span></li>
</ol><p><strong><span>V2:</span></strong></p><pre><code>Select *
from students
where batch_id=3;
</code></pre><p><span>Here one thing that is different from V2 and V1 is that there will be multiple students with batch_id=3, there cannot be just one single row that has batch_id=3.</span></p><p><span>Let us say we have 3 sections in desk f</span><span class="ui-comment-inline-span"><span class="ui-comment-inline-span">or storing the following rows.</span></span><br>
<img src="https://hackmd.io/_uploads/H195Gs3Ij.png" alt="" loading="lazy"><br>
<img src="https://hackmd.io/_uploads/r1xpfs3Lo.png" alt="" loading="lazy"><br>
<span class="ui-comment-inline-span">Now, if we have to find all the students with batch_id=3 then we have to go to the table in memory and find all of those disk address which have batch_id=3.</span></p><p><span>For batch_id 3 we will read only sec</span><span class="ui-comment-inline-span">tions 1 and 2 and not section 3, therefore saving irrelevant disk access. Section 1 and 2 will also have rows other than batch_id 3 which we will filter out in RAM.</span></p><p><strong><span>Purpose of Index:</span></strong><br>
<span>To prevent unnecessary disk fetches which leads to faster queries.</span></p><p><strong><span>When does an Index needs to be updated?</span></strong></p><ul>
<li><span>When there is a Create/ Update/ Delete on the table, Index needs to be updated as well.</span></li>
<li><span>Index needs to be updated whenever any write happens on a table.</span></li>
<li><span>Having indexes will slow down writes but make reads faster.</span></li>
</ul><p><span>I</span><span class="ui-comment-inline-span">ndex</span><span> is something like a:</span><br>
<span>&lt;Key, Value&gt; pair.</span><br>
<span>Key=&gt; column, Value=&gt; address in disk.</span><br>
<span>In</span><span class="ui-comment-inline-span">dex</span><span> is also sorted by column.</span></p><p><span>Data Structure for indexes: </span><strong><span>BTree/ B+Tree.</span></strong></p><p><span>Difference between BTree and Normal Binary Tree:</span><br>
<span>A normal Binary Tree has 1 node having 2 children.</span><br>
<span>In BTree:</span><br>
<img src="https://i.imgur.com/OMb2KDK.png" alt="" loading="lazy"><br>
<span>Now because there are multiple children,so height is reduced that means the query is going to become faster.</span></p><p><strong><span>When to create indexes?</span></strong></p><ul>
<li><span>Don’t create indexes when you create table.</span></li>
<li><span>Create indexes when you have a query that needs to be speed up.</span></li>
<li><span>Create indexes because of access patterns and not by predicting.</span></li>
<li><span>Do performance testing=&gt; Do see how it’s going to affect your writes, what is the performance impact that is happening.</span></li>
</ul><p><strong><span>Indexes make reads faster by reducing the number of irrelevant disk accesses.</span></strong></p><p><span>Let us consider another example from our shared sample databases in the mysql workbench:</span></p><p><span>In customers table, We are required to get all the customers whose points are 2273.</span><br>
<img src="https://hackmd.io/_uploads/HyBvt4jLs.png" alt="" loading="lazy"></p><p><span>Let’s run this command.</span></p><pre><code>Explain select * 
from sql_store.customers
where points=2273;
</code></pre><p><strong><span>EXPLAIN</span></strong><span> command is basically going to tell us different things that are going to happen behind the scenes when we execute the query.</span><br>
<span>It basically tell us the number of rows that we have to fetch to execute this particular query:</span><br>
<span>Here it’s 22 rows.</span></p><p><span>Let’s create index on points:</span></p><p><strong><span>Syntax:</span></strong><br>
<span>create index {idx_tablename_columnname} on</span><br>
<span>{table_name}(column name)</span></p><pre><code>create index idx_customers_points on
customers(points);
</code></pre><p><span>Now again run this:</span></p><pre><code>Explain select * 
from sql_store.customers
where points=2273;
</code></pre><p><span>Now, it will just fetch 1 row.</span></p><p><span>Query to see all the indexes,</span><br>
<code>show indexes in customers;</code></p><p><strong><span>By default a table is always indexed with primary key.</span></strong></p><p><span>Now, Let’s imagine in scaler codebase, we have a students table and we are required to get all students with a particular name,</span></p><pre><code>select *
from students 
where name="naman";
</code></pre><p><span>If we create index on students name, Index table will be very huge.</span></p><p><span>But if we create index just on </span><span class="ui-comment-inline-span">‘N’(first character of every name).</span><br>
<span>Then size of index will be 26 but again a lot of irrelevant </span><span class="ui-comment-inline-span">accesses</span><span> because many names will be starting with same first character.</span></p><p><span>Now, let’s create index on ‘NA’.</span><br>
<span>Chance of irrelevant access is bit less.</span></p><p><span>Again, create index on ‘NAM’.</span><br>
<span>After this it’s going to be almost same.</span></p><p><img src="https://i.imgur.com/prX0DNt.png" alt="" loading="lazy"></p><p><strong><span>For string columns, </span><span class="ui-comment-inline-span">Rather</span><span> than creating index on complete columns, just create index on first 3 characters.</span></strong></p><hr><h2 id="Full-Text-Indexes" data-id="Full-Text-Indexes"><a class="anchor hidden-xs" href="#Full-Text-Indexes" title="Full-Text-Indexes"><span class="octicon octicon-link"></span></a><span>Full Text Indexes:</span></h2><p><span>Let’s say we have a blogging website where there is a table called blogs.</span><br>
<span>1 popular query on this table would be on contents.</span></p><p><span>Download this snippet for blog table, (</span><a href="https://drive.google.com/file/d/1mFWdmNB9_VteF0oHSo6bKDsWq9OihMRo/view?usp=sharing" target="_blank" rel="noopener"><span>https://drive.google.com/file/d/1mFWdmNB9_VteF0oHSo6bKDsWq9OihMRo/view?usp=sharing</span></a><span>).</span></p><p><span>Therefore, Let’s consider example from our shared sample databases in the mysql workbench:</span><br>
<span>In post table,</span><br>
<img src="https://hackmd.io/_uploads/B1EbpEo8j.png" alt="" loading="lazy"></p><p><span>We are required to get all blogs that have </span><strong><span>react</span></strong><span> in their title or in body.</span></p><pre><code>select *
from posts
where body like '%react%'
or title like '%react%';
</code></pre><p><span>Again, we are required to get the blog post that contain the word </span><strong><span>react</span></strong><span> and </span><strong><span>redux</span></strong><span>.</span></p><pre><code>select *
from posts
where body like '%react%'
or title like '%react%'
and
(body like '%redux%'
or title like '%redux%');
</code></pre><p><span>Likewise there can be many sophisticated things that we want to do.</span></p><p><span>Therefore solution for this is to use </span><strong><span>Full Text Index.</span></strong></p><pre><code>Create fulltext index idx_posts_body_title on
posts(body,title);
</code></pre><p><span>Now index is created.</span></p><p><span>We can again run our query to get either rea</span><span class="ui-comment-inline-span">ct or redux in either body or titl</span><span>e.</span></p><pre><code>select *
from posts
where match(title,body) against ("react redux" in boolean mode);
</code></pre><p><span>Here both are optional, If any title or any body contains either react or redux it will be returned.</span></p><p><span>Consider this query </span><span class="ui-comment-inline-span">now</span><span>,</span></p><pre><code>select *
from posts
where match(title,body) against ("+react redux" in boolean mode);
</code></pre><p><span>Here, It must contain react but redux is optional beacuse there is </span><strong><span>+</span></strong><span> sign before react keyword that means it must contain react but may or may not contain redux.</span></p><pre><code>select *
from posts
where match(title,body) against ("+react +redux" in boolean mode);
</code></pre><p><span>Similarly,it above query </span><strong><span>+</span></strong><span> sign is there on both the keywords. It must contain both.</span></p><pre><code>select *
from posts
where match(title,body) against ("+react redux -form" in boolean mode);
</code></pre><p><span>Here, it will not contain the form word because it has </span><strong><span>-</span></strong><span> </span><span class="ui-comment-inline-span">si</span><span>gn before that.</span></p><p><span>Therefore this type of advanced search capability is also there in MYSQL using a Full Text Index.</span></p><hr><h2 id="Composite-Indexes" data-id="Composite-Indexes"><a class="anchor hidden-xs" href="#Composite-Indexes" title="Composite-Indexes"><span class="octicon octicon-link"></span></a><span>Composite Indexes:</span></h2><p><span class="ui-comment-inline-span">W</span><span>e can create indexes on multiple columns as well.</span></p><p><span>Let’s say if we create an index on students(name, phone number).</span></p><ul>
<li><span>Index table is first sorted by name then if two row have same name, tie breaker will be phone number.</span></li>
<li><span>If two people will have same name and same phone number, then primary key will be the tie breaker.</span></li>
</ul><p><strong><span>Therefore final tie breaker is Primary key always.</span></strong></p><p><span>Let’s say we have a query to get a particular phone number and index is there on name and phone number both.</span></p><pre><code>select *
from students
where phone number=124;
</code></pre><p><span>Since index table will not be sorted on phone number, </span><span class="ui-comment-inline-span">our index is not going to hel</span><span>p.</span></p><p><span>Let’s say we have a composite index on</span><span class="ui-comment-inline-span"> </span><span>the columns A, B, C, D, E.</span><br>
<img src="https://i.imgur.com/Q2ED2iO.png" alt="" loading="lazy"></p><p><span>Here, A,B,C will be faster because that is how the index is stored.</span><br>
<strong><span>If we have a Composite Index and </span><span class="ui-comment-inline-span">queries on the prefix of index improve in performance.</span></strong></p><p><strong><span>Suggestion: In</span><span class="ui-comment-inline-span"> a composite index use the column with higher cardinality (more distinct values) first.</span></strong></p><hr><hr></div>
    <div class="ui-toc dropup unselectable hidden-print" style="display:none;">
        <div class="pull-right dropdown">
            <a id="tocLabel" class="ui-toc-label btn btn-default" data-toggle="dropdown" href="#" role="button" aria-haspopup="true" aria-expanded="false" title="Table of content">
                <i class="fa fa-bars"></i>
            </a>
            <ul id="ui-toc" class="ui-toc-dropdown dropdown-menu" aria-labelledby="tocLabel">
                <div class="toc"><ul class="nav">
<li><a href="#DBMS-Lecture-8--Indexing" title="DBMS Lecture 8-  Indexing:">DBMS Lecture 8-  Indexing:</a><ul class="nav">
<li><a href="#Introduction-to-Indexing" title="Introduction to Indexing:">Introduction to Indexing:</a></li>
<li><a href="#Full-Text-Indexes" title="Full Text Indexes:">Full Text Indexes:</a></li>
<li><a href="#Composite-Indexes" title="Composite Indexes:">Composite Indexes:</a></li>
</ul>
</li>
</ul>
</div><div class="toc-menu"><a class="expand-toggle" href="#">Expand all</a><a class="back-to-top" href="#">Back to top</a><a class="go-to-bottom" href="#">Go to bottom</a></div>
            </ul>
        </div>
    </div>
    <div id="ui-toc-affix" class="ui-affix-toc ui-toc-dropdown unselectable hidden-print" data-spy="affix" style="top:17px;display:none;" null null>
        <div class="toc"><ul class="nav">
<li><a href="#DBMS-Lecture-8--Indexing" title="DBMS Lecture 8-  Indexing:">DBMS Lecture 8-  Indexing:</a><ul class="nav">
<li><a href="#Introduction-to-Indexing" title="Introduction to Indexing:">Introduction to Indexing:</a></li>
<li><a href="#Full-Text-Indexes" title="Full Text Indexes:">Full Text Indexes:</a></li>
<li><a href="#Composite-Indexes" title="Composite Indexes:">Composite Indexes:</a></li>
</ul>
</li>
</ul>
</div><div class="toc-menu"><a class="expand-toggle" href="#">Expand all</a><a class="back-to-top" href="#">Back to top</a><a class="go-to-bottom" href="#">Go to bottom</a></div>
    </div>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.1.1/jquery.min.js" integrity="sha256-hVVnYaiADRTO2PzUGmuLJr8BLUSjGIZsDYGmIJLv2b8=" crossorigin="anonymous"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.3.7/js/bootstrap.min.js" integrity="sha256-U5ZEeKfGNOja007MMD3YBI0A3OSZOQbeG6z2f2Y0hu8=" crossorigin="anonymous" defer></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/gist-embed/2.6.0/gist-embed.min.js" integrity="sha256-KyF2D6xPIJUW5sUDSs93vWyZm+1RzIpKCexxElmxl8g=" crossorigin="anonymous" defer></script>
    <script>
        var markdown = $(".markdown-body");
        //smooth all hash trigger scrolling
        function smoothHashScroll() {
            var hashElements = $("a[href^='#']").toArray();
            for (var i = 0; i < hashElements.length; i++) {
                var element = hashElements[i];
                var $element = $(element);
                var hash = element.hash;
                if (hash) {
                    $element.on('click', function (e) {
                        // store hash
                        var hash = this.hash;
                        if ($(hash).length <= 0) return;
                        // prevent default anchor click behavior
                        e.preventDefault();
                        // animate
                        $('body, html').stop(true, true).animate({
                            scrollTop: $(hash).offset().top
                        }, 100, "linear", function () {
                            // when done, add hash to url
                            // (default click behaviour)
                            window.location.hash = hash;
                        });
                    });
                }
            }
        }

        smoothHashScroll();
        var toc = $('.ui-toc');
        var tocAffix = $('.ui-affix-toc');
        var tocDropdown = $('.ui-toc-dropdown');
        //toc
        tocDropdown.click(function (e) {
            e.stopPropagation();
        });

        var enoughForAffixToc = true;

        function generateScrollspy() {
            $(document.body).scrollspy({
                target: ''
            });
            $(document.body).scrollspy('refresh');
            if (enoughForAffixToc) {
                toc.hide();
                tocAffix.show();
            } else {
                tocAffix.hide();
                toc.show();
            }
            $(document.body).scroll();
        }

        function windowResize() {
            //toc right
            var paddingRight = parseFloat(markdown.css('padding-right'));
            var right = ($(window).width() - (markdown.offset().left + markdown.outerWidth() - paddingRight));
            toc.css('right', right + 'px');
            //affix toc left
            var newbool;
            var rightMargin = (markdown.parent().outerWidth() - markdown.outerWidth()) / 2;
            //for ipad or wider device
            if (rightMargin >= 133) {
                newbool = true;
                var affixLeftMargin = (tocAffix.outerWidth() - tocAffix.width()) / 2;
                var left = markdown.offset().left + markdown.outerWidth() - affixLeftMargin;
                tocAffix.css('left', left + 'px');
            } else {
                newbool = false;
            }
            if (newbool != enoughForAffixToc) {
                enoughForAffixToc = newbool;
                generateScrollspy();
            }
        }
        $(window).resize(function () {
            windowResize();
        });
        $(document).ready(function () {
            windowResize();
            generateScrollspy();
        });

        //remove hash
        function removeHash() {
            window.location.hash = '';
        }

        var backtotop = $('.back-to-top');
        var gotobottom = $('.go-to-bottom');

        backtotop.click(function (e) {
            e.preventDefault();
            e.stopPropagation();
            if (scrollToTop)
                scrollToTop();
            removeHash();
        });
        gotobottom.click(function (e) {
            e.preventDefault();
            e.stopPropagation();
            if (scrollToBottom)
                scrollToBottom();
            removeHash();
        });

        var toggle = $('.expand-toggle');
        var tocExpand = false;

        checkExpandToggle();
        toggle.click(function (e) {
            e.preventDefault();
            e.stopPropagation();
            tocExpand = !tocExpand;
            checkExpandToggle();
        })

        function checkExpandToggle () {
            var toc = $('.ui-toc-dropdown .toc');
            var toggle = $('.expand-toggle');
            if (!tocExpand) {
                toc.removeClass('expand');
                toggle.text('Expand all');
            } else {
                toc.addClass('expand');
                toggle.text('Collapse all');
            }
        }

        function scrollToTop() {
            $('body, html').stop(true, true).animate({
                scrollTop: 0
            }, 100, "linear");
        }

        function scrollToBottom() {
            $('body, html').stop(true, true).animate({
                scrollTop: $(document.body)[0].scrollHeight
            }, 100, "linear");
        }
    </script>
</body>

</html>
