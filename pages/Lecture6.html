<!DOCTYPE html>

<html lang="en">

<head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=no">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black">
    <meta name="mobile-web-app-capable" content="yes">
    <title>
        DBMS Lecture 6- Aggregation: - HackMD
    </title>
    <link rel="icon" type="image/png" href="https://hackmd.io/favicon.png">
    <link rel="apple-touch-icon" href="https://hackmd.io/apple-touch-icon.png">

    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.3.7/css/bootstrap.min.css" integrity="sha256-916EbMg70RQy9LHiGkXzG8hSg9EdNy97GazNG/aiY1w=" crossorigin="anonymous" />
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css" integrity="sha256-eZrrJcwDc/3uDhsdt61sL2oOBY362qM3lon1gyExkL0=" crossorigin="anonymous" />
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/ionicons/2.0.1/css/ionicons.min.css" integrity="sha256-3iu9jgsy9TpTwXKb7bNQzqWekRX7pPK+2OLj3R922fo=" crossorigin="anonymous" />
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/octicons/3.5.0/octicons.min.css" integrity="sha256-QiWfLIsCT02Sdwkogf6YMiQlj4NE84MKkzEMkZnMGdg=" crossorigin="anonymous" />
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/prism/1.5.1/themes/prism.min.css" integrity="sha256-vtR0hSWRc3Tb26iuN2oZHt3KRUomwTufNIf5/4oeCyg=" crossorigin="anonymous" />
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@hackmd/emojify.js@2.1.0/dist/css/basic/emojify.min.css" integrity="sha256-UOrvMOsSDSrW6szVLe8ZDZezBxh5IoIfgTwdNDgTjiU=" crossorigin="anonymous" />
    <style>
        @import url(https://fonts.googleapis.com/css?family=Roboto:300,300i,400,400i,500,500i|Source+Code+Pro:300,400,500|Source+Sans+Pro:300,300i,400,400i,600,600i|Source+Serif+Pro&subset=latin-ext);.hljs{background:#fff;color:#333;display:block;overflow-x:auto;padding:.5em}.hljs-comment,.hljs-meta{color:#969896}.hljs-emphasis,.hljs-quote,.hljs-string,.hljs-strong,.hljs-template-variable,.hljs-variable{color:#df5000}.hljs-keyword,.hljs-selector-tag,.hljs-type{color:#a71d5d}.hljs-attribute,.hljs-bullet,.hljs-literal,.hljs-number,.hljs-symbol{color:#0086b3}.hljs-built_in,.hljs-builtin-name{color:#005cc5}.hljs-name,.hljs-section{color:#63a35c}.hljs-tag{color:#333}.hljs-attr,.hljs-selector-attr,.hljs-selector-class,.hljs-selector-id,.hljs-selector-pseudo,.hljs-title{color:#795da3}.hljs-addition{background-color:#eaffea;color:#55a532}.hljs-deletion{background-color:#ffecec;color:#bd2c00}.hljs-link{text-decoration:underline}.markdown-body{word-wrap:break-word;font-size:16px;line-height:1.5}.markdown-body:after,.markdown-body:before{content:"";display:table}.markdown-body:after{clear:both}.markdown-body>:first-child{margin-top:0!important}.markdown-body>:last-child{margin-bottom:0!important}.markdown-body a:not([href]){color:inherit;text-decoration:none}.markdown-body .absent{color:#c00}.markdown-body .anchor{float:left;line-height:1;margin-left:-20px;padding-right:4px}.markdown-body .anchor:focus{outline:none}.markdown-body blockquote,.markdown-body dl,.markdown-body ol,.markdown-body p,.markdown-body pre,.markdown-body table,.markdown-body ul{margin-bottom:16px;margin-top:0}.markdown-body hr{background-color:#e7e7e7;border:0;height:.25em;margin:24px 0;padding:0}.markdown-body blockquote{border-left:.25em solid #ddd;color:#777;font-size:16px;padding:0 1em}.markdown-body blockquote>:first-child{margin-top:0}.markdown-body blockquote>:last-child{margin-bottom:0}.markdown-body kbd,.popover kbd{background-color:#fcfcfc;border:1px solid;border-color:#ccc #ccc #bbb;border-radius:3px;box-shadow:inset 0 -1px 0 #bbb;color:#555;display:inline-block;font-size:11px;line-height:10px;padding:3px 5px;vertical-align:middle}.markdown-body .loweralpha{list-style-type:lower-alpha}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{font-weight:600;line-height:1.25;margin-bottom:16px;margin-top:24px}.markdown-body h1 .octicon-link,.markdown-body h2 .octicon-link,.markdown-body h3 .octicon-link,.markdown-body h4 .octicon-link,.markdown-body h5 .octicon-link,.markdown-body h6 .octicon-link{color:#000;vertical-align:middle;visibility:hidden}.markdown-body h1:hover .anchor,.markdown-body h2:hover .anchor,.markdown-body h3:hover .anchor,.markdown-body h4:hover .anchor,.markdown-body h5:hover .anchor,.markdown-body h6:hover .anchor{text-decoration:none}.markdown-body h1:hover .anchor .octicon-link,.markdown-body h2:hover .anchor .octicon-link,.markdown-body h3:hover .anchor .octicon-link,.markdown-body h4:hover .anchor .octicon-link,.markdown-body h5:hover .anchor .octicon-link,.markdown-body h6:hover .anchor .octicon-link{visibility:visible}.markdown-body h1 code,.markdown-body h1 tt,.markdown-body h2 code,.markdown-body h2 tt,.markdown-body h3 code,.markdown-body h3 tt,.markdown-body h4 code,.markdown-body h4 tt,.markdown-body h5 code,.markdown-body h5 tt,.markdown-body h6 code,.markdown-body h6 tt{font-size:inherit}.markdown-body h1{font-size:2em}.markdown-body h1,.markdown-body h2{border-bottom:1px solid #eee;padding-bottom:.3em}.markdown-body h2{font-size:1.5em}.markdown-body h3{font-size:1.25em}.markdown-body h4{font-size:1em}.markdown-body h5{font-size:.875em}.markdown-body h6{color:#777;font-size:.85em}.markdown-body ol,.markdown-body ul{padding-left:2em}.markdown-body ol.no-list,.markdown-body ul.no-list{list-style-type:none;padding:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-bottom:0;margin-top:0}.markdown-body li>p{margin-top:16px}.markdown-body li+li{padding-top:.25em}.markdown-body dl{padding:0}.markdown-body dl dt{font-size:1em;font-style:italic;font-weight:700;margin-top:16px;padding:0}.markdown-body dl dd{margin-bottom:16px;padding:0 16px}.markdown-body table{display:block;overflow:auto;width:100%;word-break:normal;word-break:keep-all}.markdown-body table th{font-weight:700}.markdown-body table td,.markdown-body table th{border:1px solid #ddd;padding:6px 13px}.markdown-body table tr{background-color:#fff;border-top:1px solid #ccc}.markdown-body table tr:nth-child(2n){background-color:#f8f8f8}.markdown-body img{background-color:#fff;box-sizing:initial;max-width:100%}.markdown-body img[align=right]{padding-left:20px}.markdown-body img[align=left]{padding-right:20px}.markdown-body .emoji{background-color:initial;max-width:none;vertical-align:text-top}.markdown-body span.frame{display:block;overflow:hidden}.markdown-body span.frame>span{border:1px solid #ddd;display:block;float:left;margin:13px 0 0;overflow:hidden;padding:7px;width:auto}.markdown-body span.frame span img{display:block;float:left}.markdown-body span.frame span span{clear:both;color:#333;display:block;padding:5px 0 0}.markdown-body span.align-center{clear:both;display:block;overflow:hidden}.markdown-body span.align-center>span{display:block;margin:13px auto 0;overflow:hidden;text-align:center}.markdown-body span.align-center span img{margin:0 auto;text-align:center}.markdown-body span.align-right{clear:both;display:block;overflow:hidden}.markdown-body span.align-right>span{display:block;margin:13px 0 0;overflow:hidden;text-align:right}.markdown-body span.align-right span img{margin:0;text-align:right}.markdown-body span.float-left{display:block;float:left;margin-right:13px;overflow:hidden}.markdown-body span.float-left span{margin:13px 0 0}.markdown-body span.float-right{display:block;float:right;margin-left:13px;overflow:hidden}.markdown-body span.float-right>span{display:block;margin:13px auto 0;overflow:hidden;text-align:right}.markdown-body code,.markdown-body tt{background-color:#0000000a;border-radius:3px;font-size:85%;margin:0;padding:.2em 0}.markdown-body code:after,.markdown-body code:before,.markdown-body tt:after,.markdown-body tt:before{content:"\00a0";letter-spacing:-.2em}.markdown-body code br,.markdown-body tt br{display:none}.markdown-body del code{text-decoration:inherit}.markdown-body pre{word-wrap:normal}.markdown-body pre>code{background:#0000;border:0;font-size:100%;margin:0;padding:0;white-space:pre;word-break:normal}.markdown-body .highlight{margin-bottom:16px}.markdown-body .highlight pre{margin-bottom:0;word-break:normal}.markdown-body .highlight pre,.markdown-body pre{background-color:#f7f7f7;border-radius:3px;font-size:85%;line-height:1.45;overflow:auto;padding:16px}.markdown-body pre code,.markdown-body pre tt{word-wrap:normal;background-color:initial;border:0;display:inline;line-height:inherit;margin:0;max-width:auto;overflow:visible;padding:0}.markdown-body pre code:after,.markdown-body pre code:before,.markdown-body pre tt:after,.markdown-body pre tt:before{content:normal}.markdown-body .csv-data td,.markdown-body .csv-data th{font-size:12px;line-height:1;overflow:hidden;padding:5px;text-align:left;white-space:nowrap}.markdown-body .csv-data .blob-line-num{background:#fff;border:0;padding:10px 8px 9px;text-align:right}.markdown-body .csv-data tr{border-top:0}.markdown-body .csv-data th{background:#f8f8f8;border-top:0;font-weight:700}.news .alert .markdown-body blockquote{border:0;padding:0 0 0 40px}.activity-tab .news .alert .commits,.activity-tab .news .markdown-body blockquote{padding-left:0}.task-list-item{list-style-type:none}.task-list-item label{font-weight:400}.task-list-item.enabled label{cursor:pointer}.task-list-item+.task-list-item{margin-top:3px}.task-list-item-checkbox{cursor:default!important;float:left;margin:.31em 0 .2em -1.3em!important;vertical-align:middle}.markdown-body{max-width:758px;overflow:visible!important;padding-bottom:40px;padding-top:40px;position:relative}.markdown-body .emoji{vertical-align:top}.markdown-body pre{border:inherit!important}.markdown-body code{color:inherit!important}.markdown-body pre code .wrapper{display:-moz-inline-flex;display:-ms-inline-flex;display:-o-inline-flex;display:inline-flex}.markdown-body pre code .gutter{float:left;overflow:hidden;-webkit-user-select:none;user-select:none}.markdown-body pre code .gutter.linenumber{border-right:3px solid #6ce26c!important;box-sizing:initial;color:#afafaf!important;cursor:default;display:inline-block;min-width:20px;padding:0 8px 0 0;position:relative;text-align:right;z-index:4}.markdown-body pre code .gutter.linenumber>span:before{content:attr(data-linenumber)}.markdown-body pre code .code{float:left;margin:0 0 0 16px}.markdown-body .gist .line-numbers{border-bottom:none;border-left:none;border-top:none}.markdown-body .gist .line-data{border:none}.markdown-body .gist table{border-collapse:inherit!important;border-spacing:0}.markdown-body code[data-gist-id]{background:none;padding:0}.markdown-body code[data-gist-id]:after,.markdown-body code[data-gist-id]:before{content:""}.markdown-body code[data-gist-id] .blob-num{border:unset}.markdown-body code[data-gist-id] table{margin-bottom:unset;overflow:unset}.markdown-body code[data-gist-id] table tr{background:unset}.markdown-body[dir=rtl] pre{direction:ltr}.markdown-body[dir=rtl] code{direction:ltr;unicode-bidi:embed}.markdown-body .alert>p:last-child{margin-bottom:0}.markdown-body pre.abc,.markdown-body pre.flow-chart,.markdown-body pre.graphviz,.markdown-body pre.mermaid,.markdown-body pre.sequence-diagram,.markdown-body pre.vega{background-color:inherit;border-radius:0;overflow:visible;text-align:center;white-space:inherit}.markdown-body pre.abc>code,.markdown-body pre.flow-chart>code,.markdown-body pre.graphviz>code,.markdown-body pre.mermaid>code,.markdown-body pre.sequence-diagram>code,.markdown-body pre.vega>code{text-align:left}.markdown-body pre.abc>svg,.markdown-body pre.flow-chart>svg,.markdown-body pre.graphviz>svg,.markdown-body pre.mermaid>svg,.markdown-body pre.sequence-diagram>svg,.markdown-body pre.vega>svg{height:100%;max-width:100%}.markdown-body pre>code.wrap{word-wrap:break-word;white-space:pre-wrap;white-space:-moz-pre-wrap;white-space:-pre-wrap;white-space:-o-pre-wrap}.markdown-body .alert>p:last-child,.markdown-body .alert>ul:last-child{margin-bottom:0}.markdown-body summary{display:list-item}.markdown-body summary:focus{outline:none}.markdown-body details summary{cursor:pointer}.markdown-body details:not([open])>:not(summary){display:none}.markdown-body figure{margin:1em 40px}.markdown-body .mark,.markdown-body mark{background-color:#fff1a7}.vimeo,.youtube{background-color:#000;background-position:50%;background-repeat:no-repeat;background-size:contain;cursor:pointer;display:table;overflow:hidden;text-align:center}.vimeo,.youtube{position:relative;width:100%}.youtube{padding-bottom:56.25%}.vimeo img{object-fit:contain;width:100%;z-index:0}.youtube img{object-fit:cover;z-index:0}.vimeo iframe,.youtube iframe,.youtube img{height:100%;left:0;position:absolute;top:0;width:100%}.vimeo iframe,.youtube iframe{vertical-align:middle;z-index:1}.vimeo .icon,.youtube .icon{color:#fff;height:auto;left:50%;opacity:.3;position:absolute;top:50%;transform:translate(-50%,-50%);transition:opacity .2s;width:auto;z-index:0}.vimeo:hover .icon,.youtube:hover .icon{opacity:.6;transition:opacity .2s}.slideshare .inner,.speakerdeck .inner{position:relative;width:100%}.slideshare .inner iframe,.speakerdeck .inner iframe{bottom:0;height:100%;left:0;position:absolute;right:0;top:0;width:100%}.figma{display:table;padding-bottom:56.25%;position:relative;width:100%}.figma iframe{border:1px solid #eee;bottom:0;height:100%;left:0;position:absolute;right:0;top:0;width:100%}.markmap-container{height:300px}.markmap-container>svg{height:100%;width:100%}.MJX_Assistive_MathML{display:none}#MathJax_Message{z-index:1000!important}.ui-infobar{color:#777;margin:25px auto -25px;max-width:760px;position:relative;z-index:2}.toc .invisable-node{list-style-type:none}.ui-toc{bottom:20px;position:fixed;z-index:998}.ui-toc.both-mode{margin-left:8px}.ui-toc.both-mode .ui-toc-label{border-bottom-left-radius:0;border-top-left-radius:0;height:40px;padding:10px 4px}.ui-toc-label{background-color:#e6e6e6;border:none;color:#868686;transition:opacity .2s}.ui-toc .open .ui-toc-label{color:#fff;opacity:1;transition:opacity .2s}.ui-toc-label:focus{background-color:#ccc;color:#000;opacity:.3}.ui-toc-label:hover{background-color:#ccc;opacity:1;transition:opacity .2s}.ui-toc-dropdown{margin-bottom:20px;margin-top:20px;max-height:70vh;max-width:45vw;overflow:auto;padding-left:10px;padding-right:10px;text-align:inherit;width:25vw}.ui-toc-dropdown>.toc{max-height:calc(70vh - 100px);overflow:auto}.ui-toc-dropdown[dir=rtl] .nav{letter-spacing:.0029em;padding-right:0}.ui-toc-dropdown a{overflow:hidden;text-overflow:ellipsis;white-space:pre}.ui-toc-dropdown .nav>li>a{color:#767676;display:block;font-size:13px;font-weight:500;padding:4px 20px}.ui-toc-dropdown .nav>li:first-child:last-child>ul,.ui-toc-dropdown .toc.expand ul{display:block}.ui-toc-dropdown .nav>li>a:focus,.ui-toc-dropdown .nav>li>a:hover{background-color:initial;border-left:1px solid #000;color:#000;padding-left:19px;text-decoration:none}.ui-toc-dropdown[dir=rtl] .nav>li>a:focus,.ui-toc-dropdown[dir=rtl] .nav>li>a:hover{border-left:none;border-right:1px solid #000;padding-right:19px}.ui-toc-dropdown .nav>.active:focus>a,.ui-toc-dropdown .nav>.active:hover>a,.ui-toc-dropdown .nav>.active>a{background-color:initial;border-left:2px solid #000;color:#000;font-weight:700;padding-left:18px}.ui-toc-dropdown[dir=rtl] .nav>.active:focus>a,.ui-toc-dropdown[dir=rtl] .nav>.active:hover>a,.ui-toc-dropdown[dir=rtl] .nav>.active>a{border-left:none;border-right:2px solid #000;padding-right:18px}.ui-toc-dropdown .nav .nav{display:none;padding-bottom:10px}.ui-toc-dropdown .nav>.active>ul{display:block}.ui-toc-dropdown .nav .nav>li>a{font-size:12px;font-weight:400;padding-bottom:1px;padding-left:30px;padding-top:1px}.ui-toc-dropdown[dir=rtl] .nav .nav>li>a{padding-right:30px}.ui-toc-dropdown .nav .nav>li>ul>li>a{font-size:12px;font-weight:400;padding-bottom:1px;padding-left:40px;padding-top:1px}.ui-toc-dropdown[dir=rtl] .nav .nav>li>ul>li>a{padding-right:40px}.ui-toc-dropdown .nav .nav>li>a:focus,.ui-toc-dropdown .nav .nav>li>a:hover{padding-left:29px}.ui-toc-dropdown[dir=rtl] .nav .nav>li>a:focus,.ui-toc-dropdown[dir=rtl] .nav .nav>li>a:hover{padding-right:29px}.ui-toc-dropdown .nav .nav>li>ul>li>a:focus,.ui-toc-dropdown .nav .nav>li>ul>li>a:hover{padding-left:39px}.ui-toc-dropdown[dir=rtl] .nav .nav>li>ul>li>a:focus,.ui-toc-dropdown[dir=rtl] .nav .nav>li>ul>li>a:hover{padding-right:39px}.ui-toc-dropdown .nav .nav>.active:focus>a,.ui-toc-dropdown .nav .nav>.active:hover>a,.ui-toc-dropdown .nav .nav>.active>a{font-weight:500;padding-left:28px}.ui-toc-dropdown[dir=rtl] .nav .nav>.active:focus>a,.ui-toc-dropdown[dir=rtl] .nav .nav>.active:hover>a,.ui-toc-dropdown[dir=rtl] .nav .nav>.active>a{padding-right:28px}.ui-toc-dropdown .nav .nav>.active>.nav>.active:focus>a,.ui-toc-dropdown .nav .nav>.active>.nav>.active:hover>a,.ui-toc-dropdown .nav .nav>.active>.nav>.active>a{font-weight:500;padding-left:38px}.ui-toc-dropdown[dir=rtl] .nav .nav>.active>.nav>.active:focus>a,.ui-toc-dropdown[dir=rtl] .nav .nav>.active>.nav>.active:hover>a,.ui-toc-dropdown[dir=rtl] .nav .nav>.active>.nav>.active>a{padding-right:38px}.markdown-body{font-family:-apple-system,BlinkMacSystemFont,Segoe UI,Helvetica Neue,Helvetica,Roboto,Arial,sans-serif,Apple Color Emoji,Segoe UI Emoji,Segoe UI Symbol}html[lang^=ja] .markdown-body{font-family:-apple-system,BlinkMacSystemFont,Segoe UI,Helvetica Neue,Helvetica,Roboto,Arial,Hiragino Kaku Gothic Pro,ヒラギノ角ゴ Pro W3,Osaka,Meiryo,メイリオ,MS Gothic,ＭＳ ゴシック,sans-serif,Apple Color Emoji,Segoe UI Emoji,Segoe UI Symbol}html[lang=zh-tw] .markdown-body{font-family:-apple-system,BlinkMacSystemFont,Segoe UI,Helvetica Neue,Helvetica,Roboto,Arial,PingFang TC,Microsoft JhengHei,微軟正黑,sans-serif,Apple Color Emoji,Segoe UI Emoji,Segoe UI Symbol}html[lang=zh-cn] .markdown-body{font-family:-apple-system,BlinkMacSystemFont,Segoe UI,Helvetica Neue,Helvetica,Roboto,Arial,PingFang SC,Microsoft YaHei,微软雅黑,sans-serif,Apple Color Emoji,Segoe UI Emoji,Segoe UI Symbol}html .markdown-body[lang^=ja]{font-family:-apple-system,BlinkMacSystemFont,Segoe UI,Helvetica Neue,Helvetica,Roboto,Arial,Hiragino Kaku Gothic Pro,ヒラギノ角ゴ Pro W3,Osaka,Meiryo,メイリオ,MS Gothic,ＭＳ ゴシック,sans-serif,Apple Color Emoji,Segoe UI Emoji,Segoe UI Symbol}html .markdown-body[lang=zh-tw]{font-family:-apple-system,BlinkMacSystemFont,Segoe UI,Helvetica Neue,Helvetica,Roboto,Arial,PingFang TC,Microsoft JhengHei,微軟正黑,sans-serif,Apple Color Emoji,Segoe UI Emoji,Segoe UI Symbol}html .markdown-body[lang=zh-cn]{font-family:-apple-system,BlinkMacSystemFont,Segoe UI,Helvetica Neue,Helvetica,Roboto,Arial,PingFang SC,Microsoft YaHei,微软雅黑,sans-serif,Apple Color Emoji,Segoe UI Emoji,Segoe UI Symbol}html[lang^=ja] .ui-toc-dropdown{font-family:Source Sans Pro,Helvetica,Arial,Meiryo UI,MS PGothic,ＭＳ Ｐゴシック,sans-serif}html[lang=zh-tw] .ui-toc-dropdown{font-family:Source Sans Pro,Helvetica,Arial,Microsoft JhengHei UI,微軟正黑UI,sans-serif}html[lang=zh-cn] .ui-toc-dropdown{font-family:Source Sans Pro,Helvetica,Arial,Microsoft YaHei UI,微软雅黑UI,sans-serif}html .ui-toc-dropdown[lang^=ja]{font-family:Source Sans Pro,Helvetica,Arial,Meiryo UI,MS PGothic,ＭＳ Ｐゴシック,sans-serif}html .ui-toc-dropdown[lang=zh-tw]{font-family:Source Sans Pro,Helvetica,Arial,Microsoft JhengHei UI,微軟正黑UI,sans-serif}html .ui-toc-dropdown[lang=zh-cn]{font-family:Source Sans Pro,Helvetica,Arial,Microsoft YaHei UI,微软雅黑UI,sans-serif}.ui-affix-toc{max-height:70vh;max-width:15vw;overflow:auto;position:fixed;top:0}.back-to-top,.expand-toggle,.go-to-bottom{color:#999;display:block;font-size:12px;font-weight:500;margin-left:10px;margin-top:10px;padding:4px 10px}.back-to-top:focus,.back-to-top:hover,.expand-toggle:focus,.expand-toggle:hover,.go-to-bottom:focus,.go-to-bottom:hover{color:#563d7c;text-decoration:none}.back-to-top,.go-to-bottom{margin-top:0}.ui-user-icon{background-position:50%;background-repeat:no-repeat;background-size:cover;border-radius:50%;display:block;height:20px;margin-bottom:2px;margin-right:5px;margin-top:2px;width:20px}.ui-user-icon.small{display:inline-block;height:18px;margin:0 0 .2em;vertical-align:middle;width:18px}.ui-infobar>small>span{line-height:22px}.ui-infobar>small .dropdown{display:inline-block}.ui-infobar>small .dropdown a:focus,.ui-infobar>small .dropdown a:hover{text-decoration:none}.ui-more-info{color:#888;cursor:pointer;vertical-align:middle}.ui-more-info .fa{font-size:16px}.ui-connectedGithub,.ui-published-note{color:#888}.ui-connectedGithub{line-height:23px;white-space:nowrap}.ui-connectedGithub a.file-path{color:#888;padding-left:22px;text-decoration:none}.ui-connectedGithub a.file-path:active,.ui-connectedGithub a.file-path:hover{color:#888;text-decoration:underline}.ui-connectedGithub .fa{font-size:20px}.ui-published-note .fa{font-size:20px;vertical-align:top}.unselectable{-webkit-user-select:none;-o-user-select:none;user-select:none}.selectable{-webkit-user-select:text;-o-user-select:text;user-select:text}.inline-spoiler-section{cursor:pointer}.inline-spoiler-section .spoiler-text{background-color:#333;border-radius:2px}.inline-spoiler-section .spoiler-text>*{opacity:0}.inline-spoiler-section .spoiler-img{filter:blur(10px)}.inline-spoiler-section.raw{background-color:#333;border-radius:2px}.inline-spoiler-section.raw>*{opacity:0}.inline-spoiler-section.unveil{cursor:auto}.inline-spoiler-section.unveil .spoiler-text{background-color:#3333331a}.inline-spoiler-section.unveil .spoiler-text>*{opacity:1}.inline-spoiler-section.unveil .spoiler-img{filter:none}@media print{blockquote,div,img,pre,table{page-break-inside:avoid!important}a[href]:after{font-size:12px!important}}.markdown-body.slides{color:#222;position:relative;z-index:1}.markdown-body.slides:before{background-color:currentColor;bottom:0;box-shadow:0 0 0 50vw;content:"";display:block;left:0;position:absolute;right:0;top:0;z-index:-1}.markdown-body.slides section[data-markdown]{background-color:#fff;margin-bottom:1.5em;position:relative;text-align:center}.markdown-body.slides section[data-markdown] code{text-align:left}.markdown-body.slides section[data-markdown]:before{content:"";display:block;padding-bottom:56.23%}.markdown-body.slides section[data-markdown]>div:first-child{left:1em;max-height:100%;overflow:hidden;position:absolute;right:1em;top:50%;transform:translateY(-50%)}.markdown-body.slides section[data-markdown]>ul{display:inline-block}.markdown-body.slides>section>section+section:after{border:3px solid #777;content:"";height:1.5em;position:absolute;right:1em;top:-1.5em}.site-ui-font{font-family:Source Sans Pro,Helvetica,Arial,sans-serif}html[lang^=ja] .site-ui-font{font-family:Source Sans Pro,Helvetica,Arial,Hiragino Kaku Gothic Pro,ヒラギノ角ゴ Pro W3,Osaka,Meiryo,メイリオ,MS Gothic,ＭＳ ゴシック,sans-serif}html[lang=zh-tw] .site-ui-font{font-family:Source Sans Pro,Helvetica,Arial,PingFang TC,Microsoft JhengHei,微軟正黑,sans-serif}html[lang=zh-cn] .site-ui-font{font-family:Source Sans Pro,Helvetica,Arial,PingFang SC,Microsoft YaHei,微软雅黑,sans-serif}body{font-smoothing:subpixel-antialiased!important;-webkit-font-smoothing:subpixel-antialiased!important;-moz-osx-font-smoothing:auto!important;-webkit-overflow-scrolling:touch;font-family:Source Sans Pro,Helvetica,Arial,sans-serif;letter-spacing:.025em}html[lang^=ja] body{font-family:Source Sans Pro,Helvetica,Arial,Hiragino Kaku Gothic Pro,ヒラギノ角ゴ Pro W3,Osaka,Meiryo,メイリオ,MS Gothic,ＭＳ ゴシック,sans-serif}html[lang=zh-tw] body{font-family:Source Sans Pro,Helvetica,Arial,PingFang TC,Microsoft JhengHei,微軟正黑,sans-serif}html[lang=zh-cn] body{font-family:Source Sans Pro,Helvetica,Arial,PingFang SC,Microsoft YaHei,微软雅黑,sans-serif}abbr[title]{border-bottom:none;text-decoration:underline;-webkit-text-decoration:underline dotted;text-decoration:underline dotted}abbr[data-original-title],abbr[title]{cursor:help}body.modal-open{overflow-y:auto;padding-right:0!important}svg{text-shadow:none}
    </style>
    <!-- HTML5 shim and Respond.js for IE8 support of HTML5 elements and media queries -->
    <!-- WARNING: Respond.js doesn't work if you view the page via file:// -->
    <!--[if lt IE 9]>
    	<script src="https://cdnjs.cloudflare.com/ajax/libs/html5shiv/3.7.3/html5shiv.min.js" integrity="sha256-3Jy/GbSLrg0o9y5Z5n1uw0qxZECH7C6OQpVBgNFYa0g=" crossorigin="anonymous"></script>
    	<script src="https://cdnjs.cloudflare.com/ajax/libs/respond.js/1.4.2/respond.min.js" integrity="sha256-g6iAfvZp+nDQ2TdTR/VVKJf3bGro4ub5fvWSWVRi2NE=" crossorigin="anonymous"></script>
		<script src="https://cdnjs.cloudflare.com/ajax/libs/es5-shim/4.5.9/es5-shim.min.js" integrity="sha256-8E4Is26QH0bD52WoQpcB+R/tcWQtpzlCojrybUd7Mxo=" crossorigin="anonymous"></script>
    <![endif]-->
</head>

<body>
    <div id="doc" class="markdown-body container-fluid comment-enabled" data-hard-breaks="true"><h1 id="DBMS-Lecture-6--Aggregation" data-id="DBMS-Lecture-6--Aggregation"><a class="anchor hidden-xs" href="#DBMS-Lecture-6--Aggregation" title="DBMS-Lecture-6--Aggregation"><span class="octicon octicon-link"></span></a><span>DBMS Lecture 6- Aggregation:</span></h1><div class="alert alert-info">
<p><strong><span>Agenda</span></strong></p>
<ul>
<li><a href="##Introduction-to-Aggregate-Functions:"><span>Introduction to Aggregate Functions:</span></a></li>
<li><a href="##Group-By:"><span>Group By:</span></a>
<ul>
<li><a href="###HAVING-Clause:"><span>HAVING Clause:</span></a></li>
</ul>
</li>
<li><a href="##BuiltIn-functions:"><span>BuiltIn functions:</span></a>
<ul>
<li><a href="###Numbers:"><span>Numbers:</span></a></li>
<li><a href="###Strings:"><span>Strings:</span></a></li>
<li><a href="###Date:"><span>Date:</span></a></li>
</ul>
</li>
</ul>
</div><h2 id="Introduction-to-Aggregate-Functions" data-id="Introduction-to-Aggregate-Functions"><a class="anchor hidden-xs" href="#Introduction-to-Aggregate-Functions" title="Introduction-to-Aggregate-Functions"><span class="octicon octicon-link"></span></a><span>Introduction to Aggregate Functions:</span></h2><p><span>Aggregation in normal daily language means Grouping/Collecting/Combining things.</span></p><p><span>Till now whatever queries we have done all that are row by row operations.</span><br>
<span>For Example:</span></p><pre><code>select * from students
where---- 
</code></pre><p><span>This query goes through every row of the table, it checks the particular row with the condition, if that condition is matched it returns the row, if the condition doesn’t match it doesn’t return the row. But still it’s a row by row operation.</span></p><p><span>But if we want to combine something or have an operation across a column of all the row</span><span class="ui-comment-inline-span">s</span><span>,</span><br>
<span>For Example:</span><br>
<span>Let’s have a Students table,</span><br>
<img src="https://hackmd.io/_uploads/Hyd7TUWBi.png" alt="" loading="lazy"></p><p><strong><span>Problem 1:</span></strong><span> W</span><span class="ui-comment-inline-span">e are required to get the maximum psp by any student</span></p><p><span>If we look closely in the table we are not actually returning a single row, but probably doing an operation across the </span><span class="ui-comment-inline-span">row</span><span>s, going to find the maximum </span><span class="ui-comment-inline-span">psp</span><span> and then will give the answer.</span></p><p><strong><span>Problem 2:</span></strong><span> Similarly, Let’s say we want to get the average psp of the batch now.</span><br>
<span>Here also returning the average psp is not returning a row of students, but average psp for all the stud</span><span class="ui-comment-inline-span">ents</span><span>.</span></p><p><strong><span>Problem 3:</span></strong><span> Now we are required to get the total number of scaler coins with the students of a batch.</span><br>
<span>Here also we are not returning a single row but doing an operation across a column of all the </span><span class="ui-comment-inline-span">row</span><span>s and then returning the value.</span></p><p><span>In all these problems we are not returning a single row but we are doing an operation </span><span class="ui-comment-inline-span">across a column of all the rows and then returning the value.</span></p><p><span>So basically,</span><br>
<strong><span>Aggregate functions take a set of values and they convert it to a single value.</span></strong><br>
<img src="https://hackmd.io/_uploads/H1n3aI-rs.png" alt="" loading="lazy"></p><p><span>Say, sum(1,3,4,7)=&gt; 15.</span></p><p><strong><span>Common Aggregate Functions:</span></strong></p><p><span>Max(): From a set of rows, it finds the maximum value.</span><br>
<span>Min(): It will give the minimum value.</span><br>
<span>Avg():It will give the average value.</span><br>
<span>Sum(): It will give the sum total of all the values.</span><br>
<span>Count(): It gives the number of values passed to it.</span><br>
<span>Count(9,6,7,8)=&gt; 4</span></p><p><strong><span>Aggregate functions only consider NON NULL values.</span></strong><br>
<span>for example</span><br>
<span class="ui-comment-inline-span">Count</span><span>(5,NULL,6,7)=&gt; 3</span></p><p><span>Let’s understand this with the help of an Example:</span><br>
<span>We are required to get the total number of emails of students in batch 123 from students table.</span><br>
<img src="https://hackmd.io/_uploads/HkHtfwWSj.png" alt="" loading="lazy"></p><pre><code>select count(email)
from students 
where batch=123;
</code></pre><p><span>It will go to the students table, First it selects the students with batch 123. Then count(abc@gmail, bcf@gmail, fh@gmail)=&gt; 3</span><br>
<span>But here one email is NULL.</span><br>
<span>Count(abc@gmail, bcf@gmail, fh@gmail, NULL) =&gt; Now there are 4 students but count will give 3.</span></p><p><span>If we want the number of rows, Count(*) is better than Count(column) because</span><span class="ui-comment-inline-span"> the entire row can’t be null - atleast the primary key is never null - and hence will always give the correct answer</span><span>.</span></p><p><span>Let us consider another example from our shared sample databases in the mysql workbench:</span></p><p><span>Let’s take customers table,</span><br>
<img src="https://hackmd.io/_uploads/ry2rVvbSj.png" alt="" loading="lazy"></p><p><span>We are required to get the maximum number of points that any customer have.</span></p><pre><code>Select max(points)
from customers;
</code></pre><p><span>Similarly, If we have to find the minimum number of points that any customer have- We will use “min” aggregate function.</span></p><pre><code>select min(points)
from customers;
</code></pre><p><span>Get the average of points,</span></p><pre><code>select avg(points)
from customers;
</code></pre><p><span>Now, Let’s say we are required to find that how many customers have phone_number.</span></p><pre><code>select count(phone_number)
from customers;
</code></pre><hr><p><span>Till now all of our aggregate functons are working across the whole table.</span></p><p><span>Now, Let’s say We have a students table,</span><br>
<img src="https://hackmd.io/_uploads/ryVPHDZBo.png" alt="" loading="lazy"></p><p><span>We can fin</span><span class="ui-comment-inline-span">d the average psp of all students by following query</span></p><pre><code>select avg(psp)
from students;
</code></pre><p><span>But if we are required to find average psp of students of every batch, the above query</span><span class="ui-comment-inline-span"> won’t be enough. Take a look at the expected output table.</span><br>
<span>Expected Output table:</span><br>
<img src="https://hackmd.io/_uploads/Sya_LD-ro.png" alt="" loading="lazy"></p><p><span>Here, We still need to find average, but we don’t have to aggregate across the table.</span></p><p><span>So we can do:</span></p><ol>
<li><span>Group different rows of the table</span><span class="ui-comment-inline-span">.</span></li>
<li><span>On every group, find the average.</span><br>
<img src="https://i.imgur.com/YMOJVbq.png" alt="" loading="lazy"></li>
</ol><h2 id="Group-By" data-id="Group-By"><a class="anchor hidden-xs" href="#Group-By" title="Group-By"><span class="octicon octicon-link"></span></a><span>Group By:</span></h2><pre><code>select {columns that were there in group by or aggregate functions}
from students
group by batch_id
</code></pre><p><span>No</span><span class="ui-comment-inline-span">w </span><span>the query to get average psp of students of every batch:</span></p><pre><code>select batch_id, avg(psp)
from students
group by batch_id;
</code></pre><p><span>Below query is wrong because the select clause can only contain - either the column used for group by or columns in aggregates.</span><br>
<span>Here student_id is not the column that is included in group by.</span></p><pre><code>select student_id, batch_id, avg(psp)
from students
group by batch_id;
</code></pre><p><strong><span>Internal working:</span></strong></p><ol>
<li><span>Group rows by columns in group by.</span></li>
<li><span>Call aggregate functions on each group.</span></li>
</ol><p><span>Again, Let us consider an example from our shared sample databases in the mysql workbench:</span></p><p><span>We have to find how many orders are there in every status that is possible from orders table,</span><br>
<span>Orders table:</span><br>
<img src="https://hackmd.io/_uploads/rk9Bwv-Bs.png" alt="" loading="lazy"></p><pre><code>select status, count(*)
from orders
group by status;
</code></pre><hr><p><span>When we are grouping or using aggregate functions, What if we don’t want to include every row.</span></p><p><span>For Example:</span><br>
<span>There is a students table,</span><br>
<img src="https://hackmd.io/_uploads/SJ4YYvZBo.png" alt="" loading="lazy"></p><p><span>We are required to find batches where students have an average psp &gt;= 80.</span></p><p><strong><span class="ui-comment-inline-span">Solution</span><span> 1:</span></strong></p><pre><code>select batch_id, avg(psp)
from students 
where avg(psp)&gt;=80;
</code></pre><p><span>In this,</span><br>
<code>where avg(psp)&gt;=80</code></p><p><span>Now, “Where” works when an SQL query goes through every row of the original table, then we don’t even know the avg(psp) at this particular time since avg(psp) is not a column of the table. So this will throw an error.</span></p><p><strong><span>Solution 2:</span></strong></p><pre><code>select batch_id, avg(psp)
from students
where psp&gt;=80
group by batch_id; 
</code></pre><p><span>Both the solutions are wrong.</span></p><p><strong><span>Where clause:</span></strong><br>
<span>Where is a statement that works on the rows of original tables.</span><br>
<span>It will go through every row, and find the rows where psp is &gt;=80 and these rows are going to be group by.</span></p><p><span>But the question is to find the batches where average psp&gt;=80.</span><br>
<span class="ui-comment-inline-span">There can be student whose psp is 60, one student whose psp is 100 in the same batch.</span><span> But as long as the average psp is &gt;=80, this batch is fine.</span><br>
<span>But here we will end up returning all the batches because we are only considering the students whose psp&gt;=80, so the average psp of every batch will automatically be &gt;=80 then.</span><br>
<span>Therefore solution2 is also wrong.</span></p><hr><h3 id="HAVING-Clause" data-id="HAVING-Clause"><a class="anchor hidden-xs" href="#HAVING-Clause" title="HAVING-Clause"><span class="octicon octicon-link"></span></a><span>HAVING Clause:</span></h3><p><span>Since “Where” can’t be used after group by but if we have to filter after grouping the rows, we will use “HAVING” clause.</span></p><pre><code>Select batch_id,avg(psp)
from students
group by batch_id
having avg(psp)&gt;=80;
</code></pre><p><span>We have students table,</span><br>
<img src="https://i.imgur.com/MxQwdmr.png" alt="" loading="lazy"><br>
<span class="ui-comment-inline-span">For our query we need to filter the groups and not the rows. Where is for filtering rows, Having is for filtering groups</span><span>.</span></p><ol>
<li><span>This particular table gets grouped by batch_id.</span><br>
<span>Once we have grouped the rows, now the original rows are no longer there. Now SQL is going to do everything on these groups.</span></li>
<li><span>Now it will run a query, whatever the rows are find the average psp for that.</span></li>
<li><span>Consider the groups that satisfy the condition.</span></li>
</ol><p><span>Output:</span><br>
<img src="https://i.imgur.com/ZdJ9q0x.png" alt="" loading="lazy"></p><ol>
<li><span>From: It tells which table to do the query on.</span></li>
<li><span>Where: It tells which rows of table to consider.</span></li>
<li><span>Group by: Combine the rows outputed by 2.</span><br>
<span>If no where, consider all rows.</span></li>
<li><span>Having: Filtering the groups.</span><br>
<span>By aggregate functons or by the columns that were there in group by.</span></li>
</ol><p><span>Where vs Having:</span></p><table>
<thead>
<tr>
<th><span>Where</span></th>
<th><span>Having</span></th>
</tr>
</thead>
<tbody>
<tr>
<td><span>Where filters rows</span></td>
<td><span>Having filter groups.</span></td>
</tr>
<tr>
<td><span>Comes before group by</span></td>
<td><span>comes after group by</span></td>
</tr>
<tr>
<td><span>Columns of the table to filter</span></td>
<td><span>Aggregate functions or columns via which table was grouped</span></td>
</tr>
</tbody>
</table><p><strong><span>Let’s do some queries:</span></strong></p><p><span>Find the average psp of every batch that has more than 5 students from above students table.</span></p><p><span>select {After everything}</span><br>
<span>from students</span><br>
<span>{Do we have to filter the students? No where needed}</span><br>
<span>group by batch_id</span><br>
<span>{Now, Do we have to filter the groups or consider all groups? Filter}</span><br>
<span>having count(*)&gt;5</span></p><pre><code>select batch_id, avg(psp)
from students
group by batch_id
having count(*)&gt;5;
</code></pre><p><span>Consider another query:</span></p><p><span class="ui-comment-inline-span">In products table,</span><br>
<span>Find average quantity in stock of products where unit price&gt;=2.</span><br>
<img src="https://hackmd.io/_uploads/rk-K0WcHi.png" alt="" loading="lazy"></p><p><strong><span>Solution1:</span></strong></p><pre><code>select quantity_in_stock, product_id
from products
where unit_price&gt;=2;
</code></pre><p><span>This is wrong.</span></p><ol>
<li><span>Filter the products where unit price&gt;=2.</span></li>
<li><span>On these rows we have to do the average, don’t have to group by.</span></li>
</ol><p><strong><span>Solution2:</span></strong><br>
<span>This solution is correct.</span></p><pre><code>select avg(quantity_in_stock)
from products
where unit_price&gt;=2;
</code></pre><p><span>Consider another query:</span></p><p><span class="ui-comment-inline-span">From payments table,</span><br>
<span>Find the invoice id and the total amount for payments having total amount greater than 40.</span><br>
<img src="https://hackmd.io/_uploads/S1W6Rb5Hi.png" alt="" loading="lazy"></p><pre><code>select invoice_id, sum(amount)
from payments
group by invoice_id
having sum(amount)&gt;40;
</code></pre><hr><h2 id="BuiltIn-functions" data-id="BuiltIn-functions"><a class="anchor hidden-xs" href="#BuiltIn-functions" title="BuiltIn-functions"><span class="octicon octicon-link"></span></a><span>BuiltIn functions:</span></h2><p><span>The builtin functions can be grouped by data types for w</span><span class="ui-comment-inline-span">hich they are intended</span><span>.</span></p><h3 id="Numbers" data-id="Numbers"><a class="anchor hidden-xs" href="#Numbers" title="Numbers"><span class="octicon octicon-link"></span></a><span>Numbers:</span></h3><ol>
<li>
<p><span>ROUND:Round to the given decimal point.</span><br>
<span>(Takes a number, digits after decimal).</span><br>
<span>ROUND(2.31789,2)=&gt;2.32</span></p>
</li>
<li>
<p><span>TRUNCATE: Removing the digits.</span><br>
<span>(number, digits after decimal)</span><br>
<span>Example: TRUNCATE(2.31789,2)=&gt; 2.31 (Just removing the other digits).</span></p>
</li>
<li>
<p><span>CEILING: It gives Next integer which is &gt;= number</span><br>
<span>Example: CEILING(3)=&gt; 3</span><br>
<span>CEILING(2.94)=&gt; 3</span></p>
</li>
<li>
<p><span>FLOOR: It gives First integer which is &lt;= number</span><br>
<span>Example: FLOOR(3)=&gt; 3</span><br>
<span>FLOOR(2.94)=&gt; 2</span></p>
</li>
<li>
<p><span>ABS: Gives Absolute value of a number(positive)</span><br>
<span>ABS(2.94)=&gt; 2.94</span><br>
<span>ABS(-2.94)=&gt; 2.94</span></p>
</li>
<li>
<p><span>RAND: Doesn’t take any parameter and returns a random value b/w 0 to 1.[0,1]</span></p>
</li>
</ol><hr><h3 id="Strings" data-id="Strings"><a class="anchor hidden-xs" href="#Strings" title="Strings"><span class="octicon octicon-link"></span></a><span>Strings:</span></h3><ol>
<li>
<p><span>LENGTH:</span><br>
<span>LENGTH(string), this function gives the complete length of string.</span></p>
</li>
<li>
<p><span>UPPER:</span><br>
<span>Convert the string into Upper case.</span><br>
<span>UPPER(delhi)=&gt; DELHI</span></p>
</li>
<li>
<p><span>LOWER:</span><br>
<span>Convert the string into Lower case.</span><br>
<span>LOWER(DELHI)=&gt; delhi</span></p>
</li>
<li>
<p><span>LTRIM:</span><br>
<span>Remove the spaces at the start.</span><br>
<span>LTRIM("    DELHI")=&gt; “DELHI”</span></p>
</li>
<li>
<p><span>RTRIM:</span><br>
<span>Remove the spaces from right side.</span><br>
<span>RTRIM("DELHI   ")=&gt; “DELHI”</span></p>
</li>
<li>
<p><span>TRIM:</span><br>
<span>Remove spaces from both the sides.</span></p>
</li>
<li>
<p><span>LOCATE:</span><br>
<span>It helps in finding if something exist in a string.</span><br>
<span>LOCATE(toFind, fromString)</span><br>
<span>Example: Find if ‘el’ exist in delhi.</span><br>
<span>LOCATE(el, delhi)</span><br>
<span>=&gt; 0, doesn’t exist.</span><br>
<span>=&gt; returns index of starting position.</span><br>
<span>=&gt; Answer=&gt; 2.</span><br>
<strong><span>INDEX in MYSQL starts from 1.</span></strong></p>
</li>
<li>
<p><span>Extract a chunk of String.</span><br>
<span>Let’s say we have a string, x=‘dd/mm/yy’</span></p>
<p><span>8.1  LEFT(STRING, LENGTH)=&gt; 1</span><sup><span>st</span></sup><span> length characters.</span><br>
<span>For example we can use the left function to retrieve day part from a date in ‘dd/mm/yy’ format.</span><br>
<span>LEFT(x,2) gives the dd(date part).</span></p>
<p><span>8.2: RIGHT(STRING, LENGTH).</span><br>
<span>For example we can use the right function to retrieve year part from a date in ‘dd/mm/yy’ format.</span><br>
<span>RIGHT(x,2)=&gt; yy</span></p>
<p><span>8.3: SUBSTRING(STRING, START, LENGTH)</span><br>
<span>Similarly, we can use the SUBSTRING function to retrieve middle part from a date in ‘dd/mm/yy’ format</span><br>
<span>SUBSTRING(x, 4, 2)=&gt; mm</span></p>
</li>
</ol><hr><h3 id="Date" data-id="Date"><a class="anchor hidden-xs" href="#Date" title="Date"><span class="octicon octicon-link"></span></a><span>Date:</span></h3><ol>
<li>
<p><span>NOW():</span><br>
<span>Prints current date and time.</span></p>
</li>
<li>
<p><span>CURDATE():</span><br>
<span>Prints the current date.</span></p>
</li>
<li>
<p><span>CURTIME():</span><br>
<span>Similarly, It prints current time.</span></p>
<p><span>Query can be:</span><br>
<em><span>select now();</span><br>
<span>select curdate();</span><br>
<span>select curtime();</span></em></p>
</li>
<li>
<p><span>YEAR(date):</span><br>
<span>It gives the year part of the date.</span><br>
<span>YEAR(2022-10-05)=&gt;2022</span></p>
</li>
<li>
<p><span>MONTH(date):</span><br>
<span>It gives the Month part of the date.</span><br>
<span>MONTH(2022-10-05)=&gt; october.</span></p>
</li>
<li>
<p><span>DAYNAME:</span><br>
<span>It gives the day on which this date happened.</span><br>
<span>Example: Monday. (2022-10-05 happens on monday let’s say.)</span></p>
</li>
</ol><p><span>Let us consider the que</span><span class="ui-comment-inline-span"><span class="ui-comment-inline-span"><span class="ui-comment-inline-span">ry to find </span></span></span><span>all the customers who have birth date greater than 1990.</span></p><pre><code>select *
from customers
where year(birth_date)&gt; 1990;
</code></pre><p><span>Output: 1991</span></p><hr><p><span>We often have to add something to a date or subtract something, find difference between dates.</span></p><ol>
<li><span>DATE_ADD(date, interval)</span><br>
<span>interval=&gt; interval {quantity} {unit}</span><br>
<span>Example: interval 1 day, so it’s going to add 1 day to this particular date.</span><br>
<span>interval 1 minute: add 1 minute to this particular date that is given.</span></li>
</ol><p><span>Let’s say we are required to Print the time after 10 minute.</span></p><p><code>select date-add(now(),interval 10 minute);</code></p><ol start="2">
<li><span>DATE_SUB(date, interval)</span></li>
</ol><p><span>For Example, Let’s say Amazon has a repeated process where every day they check the total amount of orders placed in last 24 hours.</span></p><p><span>The query for that will be as follows:</span><br>
<span>I</span><span class="ui-comment-inline-span">n orders table,</span><br>
<img src="https://hackmd.io/_uploads/BkCqsW5Bj.png" alt="" loading="lazy"></p><pre><code>select sum(amt)
from orders
where placedAt&gt;=date-sub(now(),interval 1 day);
</code></pre><ol start="3">
<li><span>DATE_DIFF:</span><br>
<span>It gives difference between 2 dates.</span><br>
<span>DATE-DIFF(date1, date2)=&gt; return the number of days</span></li>
</ol><p><span>Example:</span><br>
<span>There is an orders table, where one order can be paid any day after order is placed.</span><br>
<img src="https://hackmd.io/_uploads/r1V1jxqSs.png" alt="" loading="lazy"></p><p><span>Lets us conside</span><span class="ui-comment-inline-span">r we are required to find all the orders where payment was done &gt;= 2 days after placing the order.</span></p><pre><code>select * 
from orders 
where datediff(paymentAT, placed_at) &gt;= 2;
</code></pre><p><span>It takes only date part.</span></p><ol start="4">
<li><span>DATE_FORMAT: These functions take a date and then the format which we want the date to be returned in.</span><br>
<span>(date, format)</span></li>
</ol><hr><hr></div>
    <div class="ui-toc dropup unselectable hidden-print" style="display:none;">
        <div class="pull-right dropdown">
            <a id="tocLabel" class="ui-toc-label btn btn-default" data-toggle="dropdown" href="#" role="button" aria-haspopup="true" aria-expanded="false" title="Table of content">
                <i class="fa fa-bars"></i>
            </a>
            <ul id="ui-toc" class="ui-toc-dropdown dropdown-menu" aria-labelledby="tocLabel">
                <div class="toc"><ul class="nav">
<li><a href="#DBMS-Lecture-6--Aggregation" title="DBMS Lecture 6- Aggregation:">DBMS Lecture 6- Aggregation:</a><ul class="nav">
<li><a href="#Introduction-to-Aggregate-Functions" title="Introduction to Aggregate Functions:">Introduction to Aggregate Functions:</a></li>
<li><a href="#Group-By" title="Group By:">Group By:</a><ul class="nav">
<li><a href="#HAVING-Clause" title="HAVING Clause:">HAVING Clause:</a></li>
</ul>
</li>
<li><a href="#BuiltIn-functions" title="BuiltIn functions:">BuiltIn functions:</a><ul class="nav">
<li><a href="#Numbers" title="Numbers:">Numbers:</a></li>
<li><a href="#Strings" title="Strings:">Strings:</a></li>
<li><a href="#Date" title="Date:">Date:</a></li>
</ul>
</li>
</ul>
</li>
</ul>
</div><div class="toc-menu"><a class="expand-toggle" href="#">Expand all</a><a class="back-to-top" href="#">Back to top</a><a class="go-to-bottom" href="#">Go to bottom</a></div>
            </ul>
        </div>
    </div>
    <div id="ui-toc-affix" class="ui-affix-toc ui-toc-dropdown unselectable hidden-print" data-spy="affix" style="top:17px;display:none;" null null>
        <div class="toc"><ul class="nav">
<li><a href="#DBMS-Lecture-6--Aggregation" title="DBMS Lecture 6- Aggregation:">DBMS Lecture 6- Aggregation:</a><ul class="nav">
<li><a href="#Introduction-to-Aggregate-Functions" title="Introduction to Aggregate Functions:">Introduction to Aggregate Functions:</a></li>
<li><a href="#Group-By" title="Group By:">Group By:</a><ul class="nav">
<li><a href="#HAVING-Clause" title="HAVING Clause:">HAVING Clause:</a></li>
</ul>
</li>
<li><a href="#BuiltIn-functions" title="BuiltIn functions:">BuiltIn functions:</a><ul class="nav">
<li><a href="#Numbers" title="Numbers:">Numbers:</a></li>
<li><a href="#Strings" title="Strings:">Strings:</a></li>
<li><a href="#Date" title="Date:">Date:</a></li>
</ul>
</li>
</ul>
</li>
</ul>
</div><div class="toc-menu"><a class="expand-toggle" href="#">Expand all</a><a class="back-to-top" href="#">Back to top</a><a class="go-to-bottom" href="#">Go to bottom</a></div>
    </div>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.1.1/jquery.min.js" integrity="sha256-hVVnYaiADRTO2PzUGmuLJr8BLUSjGIZsDYGmIJLv2b8=" crossorigin="anonymous"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.3.7/js/bootstrap.min.js" integrity="sha256-U5ZEeKfGNOja007MMD3YBI0A3OSZOQbeG6z2f2Y0hu8=" crossorigin="anonymous" defer></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/gist-embed/2.6.0/gist-embed.min.js" integrity="sha256-KyF2D6xPIJUW5sUDSs93vWyZm+1RzIpKCexxElmxl8g=" crossorigin="anonymous" defer></script>
    <script>
        var markdown = $(".markdown-body");
        //smooth all hash trigger scrolling
        function smoothHashScroll() {
            var hashElements = $("a[href^='#']").toArray();
            for (var i = 0; i < hashElements.length; i++) {
                var element = hashElements[i];
                var $element = $(element);
                var hash = element.hash;
                if (hash) {
                    $element.on('click', function (e) {
                        // store hash
                        var hash = this.hash;
                        if ($(hash).length <= 0) return;
                        // prevent default anchor click behavior
                        e.preventDefault();
                        // animate
                        $('body, html').stop(true, true).animate({
                            scrollTop: $(hash).offset().top
                        }, 100, "linear", function () {
                            // when done, add hash to url
                            // (default click behaviour)
                            window.location.hash = hash;
                        });
                    });
                }
            }
        }

        smoothHashScroll();
        var toc = $('.ui-toc');
        var tocAffix = $('.ui-affix-toc');
        var tocDropdown = $('.ui-toc-dropdown');
        //toc
        tocDropdown.click(function (e) {
            e.stopPropagation();
        });

        var enoughForAffixToc = true;

        function generateScrollspy() {
            $(document.body).scrollspy({
                target: ''
            });
            $(document.body).scrollspy('refresh');
            if (enoughForAffixToc) {
                toc.hide();
                tocAffix.show();
            } else {
                tocAffix.hide();
                toc.show();
            }
            $(document.body).scroll();
        }

        function windowResize() {
            //toc right
            var paddingRight = parseFloat(markdown.css('padding-right'));
            var right = ($(window).width() - (markdown.offset().left + markdown.outerWidth() - paddingRight));
            toc.css('right', right + 'px');
            //affix toc left
            var newbool;
            var rightMargin = (markdown.parent().outerWidth() - markdown.outerWidth()) / 2;
            //for ipad or wider device
            if (rightMargin >= 133) {
                newbool = true;
                var affixLeftMargin = (tocAffix.outerWidth() - tocAffix.width()) / 2;
                var left = markdown.offset().left + markdown.outerWidth() - affixLeftMargin;
                tocAffix.css('left', left + 'px');
            } else {
                newbool = false;
            }
            if (newbool != enoughForAffixToc) {
                enoughForAffixToc = newbool;
                generateScrollspy();
            }
        }
        $(window).resize(function () {
            windowResize();
        });
        $(document).ready(function () {
            windowResize();
            generateScrollspy();
        });

        //remove hash
        function removeHash() {
            window.location.hash = '';
        }

        var backtotop = $('.back-to-top');
        var gotobottom = $('.go-to-bottom');

        backtotop.click(function (e) {
            e.preventDefault();
            e.stopPropagation();
            if (scrollToTop)
                scrollToTop();
            removeHash();
        });
        gotobottom.click(function (e) {
            e.preventDefault();
            e.stopPropagation();
            if (scrollToBottom)
                scrollToBottom();
            removeHash();
        });

        var toggle = $('.expand-toggle');
        var tocExpand = false;

        checkExpandToggle();
        toggle.click(function (e) {
            e.preventDefault();
            e.stopPropagation();
            tocExpand = !tocExpand;
            checkExpandToggle();
        })

        function checkExpandToggle () {
            var toc = $('.ui-toc-dropdown .toc');
            var toggle = $('.expand-toggle');
            if (!tocExpand) {
                toc.removeClass('expand');
                toggle.text('Expand all');
            } else {
                toc.addClass('expand');
                toggle.text('Collapse all');
            }
        }

        function scrollToTop() {
            $('body, html').stop(true, true).animate({
                scrollTop: 0
            }, 100, "linear");
        }

        function scrollToBottom() {
            $('body, html').stop(true, true).animate({
                scrollTop: $(document.body)[0].scrollHeight
            }, 100, "linear");
        }
    </script>
</body>

</html>
