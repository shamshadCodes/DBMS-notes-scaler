<!DOCTYPE html>

<html lang="en">
  <head>
    <meta charset="utf-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta
      name="viewport"
      content="width=device-width, initial-scale=1.0, user-scalable=no"
    />
    <meta name="apple-mobile-web-app-capable" content="yes" />
    <meta name="apple-mobile-web-app-status-bar-style" content="black" />
    <meta name="mobile-web-app-capable" content="yes" />
    <title>Subqueries</title>
    <link rel="icon" type="image/png" href="https://hackmd.io/favicon.png" />
    <link
      rel="apple-touch-icon"
      href="https://hackmd.io/apple-touch-icon.png"
    />

    <link
      rel="stylesheet"
      href="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.3.7/css/bootstrap.min.css"
      integrity="sha256-916EbMg70RQy9LHiGkXzG8hSg9EdNy97GazNG/aiY1w="
      crossorigin="anonymous"
    />
    <link
      rel="stylesheet"
      href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css"
      integrity="sha256-eZrrJcwDc/3uDhsdt61sL2oOBY362qM3lon1gyExkL0="
      crossorigin="anonymous"
    />
    <link
      rel="stylesheet"
      href="https://cdnjs.cloudflare.com/ajax/libs/ionicons/2.0.1/css/ionicons.min.css"
      integrity="sha256-3iu9jgsy9TpTwXKb7bNQzqWekRX7pPK+2OLj3R922fo="
      crossorigin="anonymous"
    />
    <link
      rel="stylesheet"
      href="https://cdnjs.cloudflare.com/ajax/libs/octicons/3.5.0/octicons.min.css"
      integrity="sha256-QiWfLIsCT02Sdwkogf6YMiQlj4NE84MKkzEMkZnMGdg="
      crossorigin="anonymous"
    />
    <link
      rel="stylesheet"
      href="https://cdnjs.cloudflare.com/ajax/libs/prism/1.5.1/themes/prism.min.css"
      integrity="sha256-vtR0hSWRc3Tb26iuN2oZHt3KRUomwTufNIf5/4oeCyg="
      crossorigin="anonymous"
    />
    <link
      rel="stylesheet"
      href="https://cdn.jsdelivr.net/npm/@hackmd/emojify.js@2.1.0/dist/css/basic/emojify.min.css"
      integrity="sha256-UOrvMOsSDSrW6szVLe8ZDZezBxh5IoIfgTwdNDgTjiU="
      crossorigin="anonymous"
    />
    <style>
      @import url(https://fonts.googleapis.com/css?family=Roboto:300,300i,400,400i,500,500i|Source+Code+Pro:300,400,500|Source+Sans+Pro:300,300i,400,400i,600,600i|Source+Serif+Pro&subset=latin-ext);
      .hljs {
        background: #fff;
        color: #333;
        display: block;
        overflow-x: auto;
        padding: 0.5em;
      }
      .hljs-comment,
      .hljs-meta {
        color: #969896;
      }
      .hljs-emphasis,
      .hljs-quote,
      .hljs-string,
      .hljs-strong,
      .hljs-template-variable,
      .hljs-variable {
        color: #df5000;
      }
      .hljs-keyword,
      .hljs-selector-tag,
      .hljs-type {
        color: #a71d5d;
      }
      .hljs-attribute,
      .hljs-bullet,
      .hljs-literal,
      .hljs-number,
      .hljs-symbol {
        color: #0086b3;
      }
      .hljs-built_in,
      .hljs-builtin-name {
        color: #005cc5;
      }
      .hljs-name,
      .hljs-section {
        color: #63a35c;
      }
      .hljs-tag {
        color: #333;
      }
      .hljs-attr,
      .hljs-selector-attr,
      .hljs-selector-class,
      .hljs-selector-id,
      .hljs-selector-pseudo,
      .hljs-title {
        color: #795da3;
      }
      .hljs-addition {
        background-color: #eaffea;
        color: #55a532;
      }
      .hljs-deletion {
        background-color: #ffecec;
        color: #bd2c00;
      }
      .hljs-link {
        text-decoration: underline;
      }
      .markdown-body {
        word-wrap: break-word;
        font-size: 16px;
        line-height: 1.5;
      }
      .markdown-body:after,
      .markdown-body:before {
        content: "";
        display: table;
      }
      .markdown-body:after {
        clear: both;
      }
      .markdown-body > :first-child {
        margin-top: 0 !important;
      }
      .markdown-body > :last-child {
        margin-bottom: 0 !important;
      }
      .markdown-body a:not([href]) {
        color: inherit;
        text-decoration: none;
      }
      .markdown-body .absent {
        color: #c00;
      }
      .markdown-body .anchor {
        float: left;
        line-height: 1;
        margin-left: -20px;
        padding-right: 4px;
      }
      .markdown-body .anchor:focus {
        outline: none;
      }
      .markdown-body blockquote,
      .markdown-body dl,
      .markdown-body ol,
      .markdown-body p,
      .markdown-body pre,
      .markdown-body table,
      .markdown-body ul {
        margin-bottom: 16px;
        margin-top: 0;
      }
      .markdown-body hr {
        background-color: #e7e7e7;
        border: 0;
        height: 0.25em;
        margin: 24px 0;
        padding: 0;
      }
      .markdown-body blockquote {
        border-left: 0.25em solid #ddd;
        color: #777;
        font-size: 16px;
        padding: 0 1em;
      }
      .markdown-body blockquote > :first-child {
        margin-top: 0;
      }
      .markdown-body blockquote > :last-child {
        margin-bottom: 0;
      }
      .markdown-body kbd,
      .popover kbd {
        background-color: #fcfcfc;
        border: 1px solid;
        border-color: #ccc #ccc #bbb;
        border-radius: 3px;
        box-shadow: inset 0 -1px 0 #bbb;
        color: #555;
        display: inline-block;
        font-size: 11px;
        line-height: 10px;
        padding: 3px 5px;
        vertical-align: middle;
      }
      .markdown-body .loweralpha {
        list-style-type: lower-alpha;
      }
      .markdown-body h1,
      .markdown-body h2,
      .markdown-body h3,
      .markdown-body h4,
      .markdown-body h5,
      .markdown-body h6 {
        font-weight: 600;
        line-height: 1.25;
        margin-bottom: 16px;
        margin-top: 24px;
      }
      .markdown-body h1 .octicon-link,
      .markdown-body h2 .octicon-link,
      .markdown-body h3 .octicon-link,
      .markdown-body h4 .octicon-link,
      .markdown-body h5 .octicon-link,
      .markdown-body h6 .octicon-link {
        color: #000;
        vertical-align: middle;
        visibility: hidden;
      }
      .markdown-body h1:hover .anchor,
      .markdown-body h2:hover .anchor,
      .markdown-body h3:hover .anchor,
      .markdown-body h4:hover .anchor,
      .markdown-body h5:hover .anchor,
      .markdown-body h6:hover .anchor {
        text-decoration: none;
      }
      .markdown-body h1:hover .anchor .octicon-link,
      .markdown-body h2:hover .anchor .octicon-link,
      .markdown-body h3:hover .anchor .octicon-link,
      .markdown-body h4:hover .anchor .octicon-link,
      .markdown-body h5:hover .anchor .octicon-link,
      .markdown-body h6:hover .anchor .octicon-link {
        visibility: visible;
      }
      .markdown-body h1 code,
      .markdown-body h1 tt,
      .markdown-body h2 code,
      .markdown-body h2 tt,
      .markdown-body h3 code,
      .markdown-body h3 tt,
      .markdown-body h4 code,
      .markdown-body h4 tt,
      .markdown-body h5 code,
      .markdown-body h5 tt,
      .markdown-body h6 code,
      .markdown-body h6 tt {
        font-size: inherit;
      }
      .markdown-body h1 {
        font-size: 2em;
      }
      .markdown-body h1,
      .markdown-body h2 {
        border-bottom: 1px solid #eee;
        padding-bottom: 0.3em;
      }
      .markdown-body h2 {
        font-size: 1.5em;
      }
      .markdown-body h3 {
        font-size: 1.25em;
      }
      .markdown-body h4 {
        font-size: 1em;
      }
      .markdown-body h5 {
        font-size: 0.875em;
      }
      .markdown-body h6 {
        color: #777;
        font-size: 0.85em;
      }
      .markdown-body ol,
      .markdown-body ul {
        padding-left: 2em;
      }
      .markdown-body ol.no-list,
      .markdown-body ul.no-list {
        list-style-type: none;
        padding: 0;
      }
      .markdown-body ol ol,
      .markdown-body ol ul,
      .markdown-body ul ol,
      .markdown-body ul ul {
        margin-bottom: 0;
        margin-top: 0;
      }
      .markdown-body li > p {
        margin-top: 16px;
      }
      .markdown-body li + li {
        padding-top: 0.25em;
      }
      .markdown-body dl {
        padding: 0;
      }
      .markdown-body dl dt {
        font-size: 1em;
        font-style: italic;
        font-weight: 700;
        margin-top: 16px;
        padding: 0;
      }
      .markdown-body dl dd {
        margin-bottom: 16px;
        padding: 0 16px;
      }
      .markdown-body table {
        display: block;
        overflow: auto;
        width: 100%;
        word-break: normal;
        word-break: keep-all;
      }
      .markdown-body table th {
        font-weight: 700;
      }
      .markdown-body table td,
      .markdown-body table th {
        border: 1px solid #ddd;
        padding: 6px 13px;
      }
      .markdown-body table tr {
        background-color: #fff;
        border-top: 1px solid #ccc;
      }
      .markdown-body table tr:nth-child(2n) {
        background-color: #f8f8f8;
      }
      .markdown-body img {
        background-color: #fff;
        box-sizing: initial;
        max-width: 100%;
      }
      .markdown-body img[align="right"] {
        padding-left: 20px;
      }
      .markdown-body img[align="left"] {
        padding-right: 20px;
      }
      .markdown-body .emoji {
        background-color: initial;
        max-width: none;
        vertical-align: text-top;
      }
      .markdown-body span.frame {
        display: block;
        overflow: hidden;
      }
      .markdown-body span.frame > span {
        border: 1px solid #ddd;
        display: block;
        float: left;
        margin: 13px 0 0;
        overflow: hidden;
        padding: 7px;
        width: auto;
      }
      .markdown-body span.frame span img {
        display: block;
        float: left;
      }
      .markdown-body span.frame span span {
        clear: both;
        color: #333;
        display: block;
        padding: 5px 0 0;
      }
      .markdown-body span.align-center {
        clear: both;
        display: block;
        overflow: hidden;
      }
      .markdown-body span.align-center > span {
        display: block;
        margin: 13px auto 0;
        overflow: hidden;
        text-align: center;
      }
      .markdown-body span.align-center span img {
        margin: 0 auto;
        text-align: center;
      }
      .markdown-body span.align-right {
        clear: both;
        display: block;
        overflow: hidden;
      }
      .markdown-body span.align-right > span {
        display: block;
        margin: 13px 0 0;
        overflow: hidden;
        text-align: right;
      }
      .markdown-body span.align-right span img {
        margin: 0;
        text-align: right;
      }
      .markdown-body span.float-left {
        display: block;
        float: left;
        margin-right: 13px;
        overflow: hidden;
      }
      .markdown-body span.float-left span {
        margin: 13px 0 0;
      }
      .markdown-body span.float-right {
        display: block;
        float: right;
        margin-left: 13px;
        overflow: hidden;
      }
      .markdown-body span.float-right > span {
        display: block;
        margin: 13px auto 0;
        overflow: hidden;
        text-align: right;
      }
      .markdown-body code,
      .markdown-body tt {
        background-color: #0000000a;
        border-radius: 3px;
        font-size: 85%;
        margin: 0;
        padding: 0.2em 0;
      }
      .markdown-body code:after,
      .markdown-body code:before,
      .markdown-body tt:after,
      .markdown-body tt:before {
        content: "\00a0";
        letter-spacing: -0.2em;
      }
      .markdown-body code br,
      .markdown-body tt br {
        display: none;
      }
      .markdown-body del code {
        text-decoration: inherit;
      }
      .markdown-body pre {
        word-wrap: normal;
      }
      .markdown-body pre > code {
        background: #0000;
        border: 0;
        font-size: 100%;
        margin: 0;
        padding: 0;
        white-space: pre;
        word-break: normal;
      }
      .markdown-body .highlight {
        margin-bottom: 16px;
      }
      .markdown-body .highlight pre {
        margin-bottom: 0;
        word-break: normal;
      }
      .markdown-body .highlight pre,
      .markdown-body pre {
        background-color: #f7f7f7;
        border-radius: 3px;
        font-size: 85%;
        line-height: 1.45;
        overflow: auto;
        padding: 16px;
      }
      .markdown-body pre code,
      .markdown-body pre tt {
        word-wrap: normal;
        background-color: initial;
        border: 0;
        display: inline;
        line-height: inherit;
        margin: 0;
        max-width: auto;
        overflow: visible;
        padding: 0;
      }
      .markdown-body pre code:after,
      .markdown-body pre code:before,
      .markdown-body pre tt:after,
      .markdown-body pre tt:before {
        content: normal;
      }
      .markdown-body .csv-data td,
      .markdown-body .csv-data th {
        font-size: 12px;
        line-height: 1;
        overflow: hidden;
        padding: 5px;
        text-align: left;
        white-space: nowrap;
      }
      .markdown-body .csv-data .blob-line-num {
        background: #fff;
        border: 0;
        padding: 10px 8px 9px;
        text-align: right;
      }
      .markdown-body .csv-data tr {
        border-top: 0;
      }
      .markdown-body .csv-data th {
        background: #f8f8f8;
        border-top: 0;
        font-weight: 700;
      }
      .news .alert .markdown-body blockquote {
        border: 0;
        padding: 0 0 0 40px;
      }
      .activity-tab .news .alert .commits,
      .activity-tab .news .markdown-body blockquote {
        padding-left: 0;
      }
      .task-list-item {
        list-style-type: none;
      }
      .task-list-item label {
        font-weight: 400;
      }
      .task-list-item.enabled label {
        cursor: pointer;
      }
      .task-list-item + .task-list-item {
        margin-top: 3px;
      }
      .task-list-item-checkbox {
        cursor: default !important;
        float: left;
        margin: 0.31em 0 0.2em -1.3em !important;
        vertical-align: middle;
      }
      .markdown-body {
        max-width: 758px;
        overflow: visible !important;
        padding-bottom: 40px;
        padding-top: 40px;
        position: relative;
      }
      .markdown-body .emoji {
        vertical-align: top;
      }
      .markdown-body pre {
        border: inherit !important;
      }
      .markdown-body code {
        color: inherit !important;
      }
      .markdown-body pre code .wrapper {
        display: -moz-inline-flex;
        display: -ms-inline-flex;
        display: -o-inline-flex;
        display: inline-flex;
      }
      .markdown-body pre code .gutter {
        float: left;
        overflow: hidden;
        -webkit-user-select: none;
        user-select: none;
      }
      .markdown-body pre code .gutter.linenumber {
        border-right: 3px solid #6ce26c !important;
        box-sizing: initial;
        color: #afafaf !important;
        cursor: default;
        display: inline-block;
        min-width: 20px;
        padding: 0 8px 0 0;
        position: relative;
        text-align: right;
        z-index: 4;
      }
      .markdown-body pre code .gutter.linenumber > span:before {
        content: attr(data-linenumber);
      }
      .markdown-body pre code .code {
        float: left;
        margin: 0 0 0 16px;
      }
      .markdown-body .gist .line-numbers {
        border-bottom: none;
        border-left: none;
        border-top: none;
      }
      .markdown-body .gist .line-data {
        border: none;
      }
      .markdown-body .gist table {
        border-collapse: inherit !important;
        border-spacing: 0;
      }
      .markdown-body code[data-gist-id] {
        background: none;
        padding: 0;
      }
      .markdown-body code[data-gist-id]:after,
      .markdown-body code[data-gist-id]:before {
        content: "";
      }
      .markdown-body code[data-gist-id] .blob-num {
        border: unset;
      }
      .markdown-body code[data-gist-id] table {
        margin-bottom: unset;
        overflow: unset;
      }
      .markdown-body code[data-gist-id] table tr {
        background: unset;
      }
      .markdown-body[dir="rtl"] pre {
        direction: ltr;
      }
      .markdown-body[dir="rtl"] code {
        direction: ltr;
        unicode-bidi: embed;
      }
      .markdown-body .alert > p:last-child {
        margin-bottom: 0;
      }
      .markdown-body pre.abc,
      .markdown-body pre.flow-chart,
      .markdown-body pre.graphviz,
      .markdown-body pre.mermaid,
      .markdown-body pre.sequence-diagram,
      .markdown-body pre.vega {
        background-color: inherit;
        border-radius: 0;
        overflow: visible;
        text-align: center;
        white-space: inherit;
      }
      .markdown-body pre.abc > code,
      .markdown-body pre.flow-chart > code,
      .markdown-body pre.graphviz > code,
      .markdown-body pre.mermaid > code,
      .markdown-body pre.sequence-diagram > code,
      .markdown-body pre.vega > code {
        text-align: left;
      }
      .markdown-body pre.abc > svg,
      .markdown-body pre.flow-chart > svg,
      .markdown-body pre.graphviz > svg,
      .markdown-body pre.mermaid > svg,
      .markdown-body pre.sequence-diagram > svg,
      .markdown-body pre.vega > svg {
        height: 100%;
        max-width: 100%;
      }
      .markdown-body pre > code.wrap {
        word-wrap: break-word;
        white-space: pre-wrap;
        white-space: -moz-pre-wrap;
        white-space: -pre-wrap;
        white-space: -o-pre-wrap;
      }
      .markdown-body .alert > p:last-child,
      .markdown-body .alert > ul:last-child {
        margin-bottom: 0;
      }
      .markdown-body summary {
        display: list-item;
      }
      .markdown-body summary:focus {
        outline: none;
      }
      .markdown-body details summary {
        cursor: pointer;
      }
      .markdown-body details:not([open]) > :not(summary) {
        display: none;
      }
      .markdown-body figure {
        margin: 1em 40px;
      }
      .markdown-body .mark,
      .markdown-body mark {
        background-color: #fff1a7;
      }
      .vimeo,
      .youtube {
        background-color: #000;
        background-position: 50%;
        background-repeat: no-repeat;
        background-size: contain;
        cursor: pointer;
        display: table;
        overflow: hidden;
        text-align: center;
      }
      .vimeo,
      .youtube {
        position: relative;
        width: 100%;
      }
      .youtube {
        padding-bottom: 56.25%;
      }
      .vimeo img {
        object-fit: contain;
        width: 100%;
        z-index: 0;
      }
      .youtube img {
        object-fit: cover;
        z-index: 0;
      }
      .vimeo iframe,
      .youtube iframe,
      .youtube img {
        height: 100%;
        left: 0;
        position: absolute;
        top: 0;
        width: 100%;
      }
      .vimeo iframe,
      .youtube iframe {
        vertical-align: middle;
        z-index: 1;
      }
      .vimeo .icon,
      .youtube .icon {
        color: #fff;
        height: auto;
        left: 50%;
        opacity: 0.3;
        position: absolute;
        top: 50%;
        transform: translate(-50%, -50%);
        transition: opacity 0.2s;
        width: auto;
        z-index: 0;
      }
      .vimeo:hover .icon,
      .youtube:hover .icon {
        opacity: 0.6;
        transition: opacity 0.2s;
      }
      .slideshare .inner,
      .speakerdeck .inner {
        position: relative;
        width: 100%;
      }
      .slideshare .inner iframe,
      .speakerdeck .inner iframe {
        bottom: 0;
        height: 100%;
        left: 0;
        position: absolute;
        right: 0;
        top: 0;
        width: 100%;
      }
      .figma {
        display: table;
        padding-bottom: 56.25%;
        position: relative;
        width: 100%;
      }
      .figma iframe {
        border: 1px solid #eee;
        bottom: 0;
        height: 100%;
        left: 0;
        position: absolute;
        right: 0;
        top: 0;
        width: 100%;
      }
      .markmap-container {
        height: 300px;
      }
      .markmap-container > svg {
        height: 100%;
        width: 100%;
      }
      .MJX_Assistive_MathML {
        display: none;
      }
      #MathJax_Message {
        z-index: 1000 !important;
      }
      .ui-infobar {
        color: #777;
        margin: 25px auto -25px;
        max-width: 760px;
        position: relative;
        z-index: 2;
      }
      .toc .invisable-node {
        list-style-type: none;
      }
      .ui-toc {
        bottom: 20px;
        position: fixed;
        z-index: 998;
      }
      .ui-toc.both-mode {
        margin-left: 8px;
      }
      .ui-toc.both-mode .ui-toc-label {
        border-bottom-left-radius: 0;
        border-top-left-radius: 0;
        height: 40px;
        padding: 10px 4px;
      }
      .ui-toc-label {
        background-color: #e6e6e6;
        border: none;
        color: #868686;
        transition: opacity 0.2s;
      }
      .ui-toc .open .ui-toc-label {
        color: #fff;
        opacity: 1;
        transition: opacity 0.2s;
      }
      .ui-toc-label:focus {
        background-color: #ccc;
        color: #000;
        opacity: 0.3;
      }
      .ui-toc-label:hover {
        background-color: #ccc;
        opacity: 1;
        transition: opacity 0.2s;
      }
      .ui-toc-dropdown {
        margin-bottom: 20px;
        margin-top: 20px;
        max-height: 70vh;
        max-width: 45vw;
        overflow: auto;
        padding-left: 10px;
        padding-right: 10px;
        text-align: inherit;
        width: 25vw;
      }
      .ui-toc-dropdown > .toc {
        max-height: calc(70vh - 100px);
        overflow: auto;
      }
      .ui-toc-dropdown[dir="rtl"] .nav {
        letter-spacing: 0.0029em;
        padding-right: 0;
      }
      .ui-toc-dropdown a {
        overflow: hidden;
        text-overflow: ellipsis;
        white-space: pre;
      }
      .ui-toc-dropdown .nav > li > a {
        color: #767676;
        display: block;
        font-size: 13px;
        font-weight: 500;
        padding: 4px 20px;
      }
      .ui-toc-dropdown .nav > li:first-child:last-child > ul,
      .ui-toc-dropdown .toc.expand ul {
        display: block;
      }
      .ui-toc-dropdown .nav > li > a:focus,
      .ui-toc-dropdown .nav > li > a:hover {
        background-color: initial;
        border-left: 1px solid #000;
        color: #000;
        padding-left: 19px;
        text-decoration: none;
      }
      .ui-toc-dropdown[dir="rtl"] .nav > li > a:focus,
      .ui-toc-dropdown[dir="rtl"] .nav > li > a:hover {
        border-left: none;
        border-right: 1px solid #000;
        padding-right: 19px;
      }
      .ui-toc-dropdown .nav > .active:focus > a,
      .ui-toc-dropdown .nav > .active:hover > a,
      .ui-toc-dropdown .nav > .active > a {
        background-color: initial;
        border-left: 2px solid #000;
        color: #000;
        font-weight: 700;
        padding-left: 18px;
      }
      .ui-toc-dropdown[dir="rtl"] .nav > .active:focus > a,
      .ui-toc-dropdown[dir="rtl"] .nav > .active:hover > a,
      .ui-toc-dropdown[dir="rtl"] .nav > .active > a {
        border-left: none;
        border-right: 2px solid #000;
        padding-right: 18px;
      }
      .ui-toc-dropdown .nav .nav {
        display: none;
        padding-bottom: 10px;
      }
      .ui-toc-dropdown .nav > .active > ul {
        display: block;
      }
      .ui-toc-dropdown .nav .nav > li > a {
        font-size: 12px;
        font-weight: 400;
        padding-bottom: 1px;
        padding-left: 30px;
        padding-top: 1px;
      }
      .ui-toc-dropdown[dir="rtl"] .nav .nav > li > a {
        padding-right: 30px;
      }
      .ui-toc-dropdown .nav .nav > li > ul > li > a {
        font-size: 12px;
        font-weight: 400;
        padding-bottom: 1px;
        padding-left: 40px;
        padding-top: 1px;
      }
      .ui-toc-dropdown[dir="rtl"] .nav .nav > li > ul > li > a {
        padding-right: 40px;
      }
      .ui-toc-dropdown .nav .nav > li > a:focus,
      .ui-toc-dropdown .nav .nav > li > a:hover {
        padding-left: 29px;
      }
      .ui-toc-dropdown[dir="rtl"] .nav .nav > li > a:focus,
      .ui-toc-dropdown[dir="rtl"] .nav .nav > li > a:hover {
        padding-right: 29px;
      }
      .ui-toc-dropdown .nav .nav > li > ul > li > a:focus,
      .ui-toc-dropdown .nav .nav > li > ul > li > a:hover {
        padding-left: 39px;
      }
      .ui-toc-dropdown[dir="rtl"] .nav .nav > li > ul > li > a:focus,
      .ui-toc-dropdown[dir="rtl"] .nav .nav > li > ul > li > a:hover {
        padding-right: 39px;
      }
      .ui-toc-dropdown .nav .nav > .active:focus > a,
      .ui-toc-dropdown .nav .nav > .active:hover > a,
      .ui-toc-dropdown .nav .nav > .active > a {
        font-weight: 500;
        padding-left: 28px;
      }
      .ui-toc-dropdown[dir="rtl"] .nav .nav > .active:focus > a,
      .ui-toc-dropdown[dir="rtl"] .nav .nav > .active:hover > a,
      .ui-toc-dropdown[dir="rtl"] .nav .nav > .active > a {
        padding-right: 28px;
      }
      .ui-toc-dropdown .nav .nav > .active > .nav > .active:focus > a,
      .ui-toc-dropdown .nav .nav > .active > .nav > .active:hover > a,
      .ui-toc-dropdown .nav .nav > .active > .nav > .active > a {
        font-weight: 500;
        padding-left: 38px;
      }
      .ui-toc-dropdown[dir="rtl"]
        .nav
        .nav
        > .active
        > .nav
        > .active:focus
        > a,
      .ui-toc-dropdown[dir="rtl"]
        .nav
        .nav
        > .active
        > .nav
        > .active:hover
        > a,
      .ui-toc-dropdown[dir="rtl"] .nav .nav > .active > .nav > .active > a {
        padding-right: 38px;
      }
      .markdown-body {
        font-family: -apple-system, BlinkMacSystemFont, Segoe UI, Helvetica Neue,
          Helvetica, Roboto, Arial, sans-serif, Apple Color Emoji,
          Segoe UI Emoji, Segoe UI Symbol;
      }
      html[lang^="ja"] .markdown-body {
        font-family: -apple-system, BlinkMacSystemFont, Segoe UI, Helvetica Neue,
          Helvetica, Roboto, Arial, Hiragino Kaku Gothic Pro,
          ヒラギノ角ゴ Pro W3, Osaka, Meiryo, メイリオ, MS Gothic, ＭＳ ゴシック,
          sans-serif, Apple Color Emoji, Segoe UI Emoji, Segoe UI Symbol;
      }
      html[lang="zh-tw"] .markdown-body {
        font-family: -apple-system, BlinkMacSystemFont, Segoe UI, Helvetica Neue,
          Helvetica, Roboto, Arial, PingFang TC, Microsoft JhengHei, 微軟正黑,
          sans-serif, Apple Color Emoji, Segoe UI Emoji, Segoe UI Symbol;
      }
      html[lang="zh-cn"] .markdown-body {
        font-family: -apple-system, BlinkMacSystemFont, Segoe UI, Helvetica Neue,
          Helvetica, Roboto, Arial, PingFang SC, Microsoft YaHei, 微软雅黑,
          sans-serif, Apple Color Emoji, Segoe UI Emoji, Segoe UI Symbol;
      }
      html .markdown-body[lang^="ja"] {
        font-family: -apple-system, BlinkMacSystemFont, Segoe UI, Helvetica Neue,
          Helvetica, Roboto, Arial, Hiragino Kaku Gothic Pro,
          ヒラギノ角ゴ Pro W3, Osaka, Meiryo, メイリオ, MS Gothic, ＭＳ ゴシック,
          sans-serif, Apple Color Emoji, Segoe UI Emoji, Segoe UI Symbol;
      }
      html .markdown-body[lang="zh-tw"] {
        font-family: -apple-system, BlinkMacSystemFont, Segoe UI, Helvetica Neue,
          Helvetica, Roboto, Arial, PingFang TC, Microsoft JhengHei, 微軟正黑,
          sans-serif, Apple Color Emoji, Segoe UI Emoji, Segoe UI Symbol;
      }
      html .markdown-body[lang="zh-cn"] {
        font-family: -apple-system, BlinkMacSystemFont, Segoe UI, Helvetica Neue,
          Helvetica, Roboto, Arial, PingFang SC, Microsoft YaHei, 微软雅黑,
          sans-serif, Apple Color Emoji, Segoe UI Emoji, Segoe UI Symbol;
      }
      html[lang^="ja"] .ui-toc-dropdown {
        font-family: Source Sans Pro, Helvetica, Arial, Meiryo UI, MS PGothic,
          ＭＳ Ｐゴシック, sans-serif;
      }
      html[lang="zh-tw"] .ui-toc-dropdown {
        font-family: Source Sans Pro, Helvetica, Arial, Microsoft JhengHei UI,
          微軟正黑UI, sans-serif;
      }
      html[lang="zh-cn"] .ui-toc-dropdown {
        font-family: Source Sans Pro, Helvetica, Arial, Microsoft YaHei UI,
          微软雅黑UI, sans-serif;
      }
      html .ui-toc-dropdown[lang^="ja"] {
        font-family: Source Sans Pro, Helvetica, Arial, Meiryo UI, MS PGothic,
          ＭＳ Ｐゴシック, sans-serif;
      }
      html .ui-toc-dropdown[lang="zh-tw"] {
        font-family: Source Sans Pro, Helvetica, Arial, Microsoft JhengHei UI,
          微軟正黑UI, sans-serif;
      }
      html .ui-toc-dropdown[lang="zh-cn"] {
        font-family: Source Sans Pro, Helvetica, Arial, Microsoft YaHei UI,
          微软雅黑UI, sans-serif;
      }
      .ui-affix-toc {
        max-height: 70vh;
        max-width: 15vw;
        overflow: auto;
        position: fixed;
        top: 0;
      }
      .back-to-top,
      .expand-toggle,
      .go-to-bottom,
      .go-to-homepage {
        color: #999;
        display: block;
        font-size: 12px;
        font-weight: 500;
        margin-left: 10px;
        margin-top: 10px;
        padding: 4px 10px;
      }
      .back-to-top:focus,
      .back-to-top:hover,
      .expand-toggle:focus,
      .expand-toggle:hover,
      .go-to-bottom:focus,
      .go-to-bottom:hover,
      .go-to-homepage:focus,
      .go-to-homepage:hover {
        color: #563d7c;
        text-decoration: none;
      }
      .back-to-top,
      .go-to-bottom,
      .go-to-homepage {
        margin-top: 0;
      }
      .ui-user-icon {
        background-position: 50%;
        background-repeat: no-repeat;
        background-size: cover;
        border-radius: 50%;
        display: block;
        height: 20px;
        margin-bottom: 2px;
        margin-right: 5px;
        margin-top: 2px;
        width: 20px;
      }
      .ui-user-icon.small {
        display: inline-block;
        height: 18px;
        margin: 0 0 0.2em;
        vertical-align: middle;
        width: 18px;
      }
      .ui-infobar > small > span {
        line-height: 22px;
      }
      .ui-infobar > small .dropdown {
        display: inline-block;
      }
      .ui-infobar > small .dropdown a:focus,
      .ui-infobar > small .dropdown a:hover {
        text-decoration: none;
      }
      .ui-more-info {
        color: #888;
        cursor: pointer;
        vertical-align: middle;
      }
      .ui-more-info .fa {
        font-size: 16px;
      }
      .ui-connectedGithub,
      .ui-published-note {
        color: #888;
      }
      .ui-connectedGithub {
        line-height: 23px;
        white-space: nowrap;
      }
      .ui-connectedGithub a.file-path {
        color: #888;
        padding-left: 22px;
        text-decoration: none;
      }
      .ui-connectedGithub a.file-path:active,
      .ui-connectedGithub a.file-path:hover {
        color: #888;
        text-decoration: underline;
      }
      .ui-connectedGithub .fa {
        font-size: 20px;
      }
      .ui-published-note .fa {
        font-size: 20px;
        vertical-align: top;
      }
      .unselectable {
        -webkit-user-select: none;
        -o-user-select: none;
        user-select: none;
      }
      .selectable {
        -webkit-user-select: text;
        -o-user-select: text;
        user-select: text;
      }
      .inline-spoiler-section {
        cursor: pointer;
      }
      .inline-spoiler-section .spoiler-text {
        background-color: #333;
        border-radius: 2px;
      }
      .inline-spoiler-section .spoiler-text > * {
        opacity: 0;
      }
      .inline-spoiler-section .spoiler-img {
        filter: blur(10px);
      }
      .inline-spoiler-section.raw {
        background-color: #333;
        border-radius: 2px;
      }
      .inline-spoiler-section.raw > * {
        opacity: 0;
      }
      .inline-spoiler-section.unveil {
        cursor: auto;
      }
      .inline-spoiler-section.unveil .spoiler-text {
        background-color: #3333331a;
      }
      .inline-spoiler-section.unveil .spoiler-text > * {
        opacity: 1;
      }
      .inline-spoiler-section.unveil .spoiler-img {
        filter: none;
      }
      @media print {
        blockquote,
        div,
        img,
        pre,
        table {
          page-break-inside: avoid !important;
        }
        a[href]:after {
          font-size: 12px !important;
        }
      }
      .markdown-body.slides {
        color: #222;
        position: relative;
        z-index: 1;
      }
      .markdown-body.slides:before {
        background-color: currentColor;
        bottom: 0;
        box-shadow: 0 0 0 50vw;
        content: "";
        display: block;
        left: 0;
        position: absolute;
        right: 0;
        top: 0;
        z-index: -1;
      }
      .markdown-body.slides section[data-markdown] {
        background-color: #fff;
        margin-bottom: 1.5em;
        position: relative;
        text-align: center;
      }
      .markdown-body.slides section[data-markdown] code {
        text-align: left;
      }
      .markdown-body.slides section[data-markdown]:before {
        content: "";
        display: block;
        padding-bottom: 56.23%;
      }
      .markdown-body.slides section[data-markdown] > div:first-child {
        left: 1em;
        max-height: 100%;
        overflow: hidden;
        position: absolute;
        right: 1em;
        top: 50%;
        transform: translateY(-50%);
      }
      .markdown-body.slides section[data-markdown] > ul {
        display: inline-block;
      }
      .markdown-body.slides > section > section + section:after {
        border: 3px solid #777;
        content: "";
        height: 1.5em;
        position: absolute;
        right: 1em;
        top: -1.5em;
      }
      .site-ui-font {
        font-family: Source Sans Pro, Helvetica, Arial, sans-serif;
      }
      html[lang^="ja"] .site-ui-font {
        font-family: Source Sans Pro, Helvetica, Arial, Hiragino Kaku Gothic Pro,
          ヒラギノ角ゴ Pro W3, Osaka, Meiryo, メイリオ, MS Gothic, ＭＳ ゴシック,
          sans-serif;
      }
      html[lang="zh-tw"] .site-ui-font {
        font-family: Source Sans Pro, Helvetica, Arial, PingFang TC,
          Microsoft JhengHei, 微軟正黑, sans-serif;
      }
      html[lang="zh-cn"] .site-ui-font {
        font-family: Source Sans Pro, Helvetica, Arial, PingFang SC,
          Microsoft YaHei, 微软雅黑, sans-serif;
      }
      body {
        -webkit-font-smoothing: subpixel-antialiased !important;
        -webkit-font-smoothing: subpixel-antialiased !important;
        -moz-osx-font-smoothing: auto !important;
        -webkit-overflow-scrolling: touch;
        font-family: Source Sans Pro, Helvetica, Arial, sans-serif;
        letter-spacing: 0.025em;
      }
      html[lang^="ja"] body {
        font-family: Source Sans Pro, Helvetica, Arial, Hiragino Kaku Gothic Pro,
          ヒラギノ角ゴ Pro W3, Osaka, Meiryo, メイリオ, MS Gothic, ＭＳ ゴシック,
          sans-serif;
      }
      html[lang="zh-tw"] body {
        font-family: Source Sans Pro, Helvetica, Arial, PingFang TC,
          Microsoft JhengHei, 微軟正黑, sans-serif;
      }
      html[lang="zh-cn"] body {
        font-family: Source Sans Pro, Helvetica, Arial, PingFang SC,
          Microsoft YaHei, 微软雅黑, sans-serif;
      }
      abbr[title] {
        border-bottom: none;
        text-decoration: underline;
        -webkit-text-decoration: underline dotted;
        text-decoration: underline dotted;
      }
      abbr[data-original-title],
      abbr[title] {
        cursor: help;
      }
      body.modal-open {
        overflow-y: auto;
        padding-right: 0 !important;
      }
      svg {
        text-shadow: none;
      }
    </style>
    <!-- HTML5 shim and Respond.js for IE8 support of HTML5 elements and media queries -->
    <!-- WARNING: Respond.js doesn't work if you view the page via file:// -->
    <!--[if lt IE 9]>
      <script
        src="https://cdnjs.cloudflare.com/ajax/libs/html5shiv/3.7.3/html5shiv.min.js"
        integrity="sha256-3Jy/GbSLrg0o9y5Z5n1uw0qxZECH7C6OQpVBgNFYa0g="
        crossorigin="anonymous"
      ></script>
      <script
        src="https://cdnjs.cloudflare.com/ajax/libs/respond.js/1.4.2/respond.min.js"
        integrity="sha256-g6iAfvZp+nDQ2TdTR/VVKJf3bGro4ub5fvWSWVRi2NE="
        crossorigin="anonymous"
      ></script>
      <script
        src="https://cdnjs.cloudflare.com/ajax/libs/es5-shim/4.5.9/es5-shim.min.js"
        integrity="sha256-8E4Is26QH0bD52WoQpcB+R/tcWQtpzlCojrybUd7Mxo="
        crossorigin="anonymous"
      ></script>
    <![endif]-->
  </head>

  <body>
    <div
      id="doc"
      class="markdown-body container-fluid comment-enabled"
      data-hard-breaks="true"
    >
      <h1 id="DBMS-Lecture-9--Subqueries" data-id="DBMS-Lecture-9--Subqueries">
        <a
          class="anchor hidden-xs"
          href="#DBMS-Lecture-9--Subqueries"
          title="DBMS-Lecture-9--Subqueries"
          ><span class="octicon octicon-link"></span></a
        ><span>Subqueries</span>
      </h1>
      <div class="alert alert-info">
        <p>
          <strong><span>Agenda:</span></strong>
        </p>
        <ul>
          <li>
            <a href="#Introduction-to-Subqueries"
              ><span>Introduction to Subqueries</span></a
            >
          </li>
          <li>
            <a href="#Subqueries-using-Where"
              ><span>Subqueries using Where:</span></a
            >
            <ul>
              <li>
                <a href="#IN-clause"><span>IN Clause</span></a>
              </li>
              <li>
                <a href="#ALL-clause"><span>ALL clause</span></a>
              </li>
              <li>
                <a href="#ANY-clause"><span>ANY clause</span></a>
              </li>
              <li>
                <a href="#EXISTS-clause"><span>EXISTS clause</span></a>
              </li>
            </ul>
          </li>
          <li>
            <a href="#Correlated-Subqueries"
              ><span>Correlated Subqueries:</span></a
            >
            <ul>
              <li>
                <a href="#Subquery-Using-Select"
                  ><span class="ui-comment-inline-span"
                    >Subquery Using Select
                  </span></a
                >
              </li>
              <li>
                <a href="#Subquery-Using-From"
                  ><span class="ui-comment-inline-span"
                    >Subquery Using From</span
                  ></a
                >
              </li>
            </ul>
          </li>
          <li>
            <a href="#VIEWS"><span>VIEWS</span></a>
          </li>
          <li>
            <a href="#IF-clause"><span>IF clause</span></a>
          </li>
          <li>
            <a href="#Case-clause"><span>Case clause</span></a>
          </li>
          <li>
            <a href="#IFNULL-clause"><span>IFNULL clause</span></a>
          </li>
          <li>
            <a href="#COALESCE-clause"><span>COALESCE clause</span></a>
          </li>
        </ul>
      </div>
      <h2 id="Introduction-to-Subqueries" data-id="Introduction-to-Subqueries">
        <a
          class="anchor hidden-xs"
          href="#Introduction-to-Subqueries"
          title="Introduction-to-Subqueries"
          ><span class="octicon octicon-link"></span></a
        ><span>Introduction to Subqueries:</span>
      </h2>
      <p>
        <span>Most of sub-queries work can be </span
        ><span class="ui-comment-inline-span"
          >done via joins also, but sub-queries are easier to read for complex
          queries.</span
        >
      </p>
      <p>
        <span>Let’s consider an example,</span><br />
        <span
          >We are required to find all the students who have a psp greater than
          psp of student with id=18 from students table,</span
        ><br />
        <img src="https://i.imgur.com/UrxYuj6.png" alt="" loading="lazy" />
      </p>
      <p>
        <strong><span>Solution1</span></strong
        ><span>:</span>
      </p>
      <pre><code>select *
from students a
join students b
on a.psp&gt;b.psp
and b.id=18;
</code></pre>
      <p>
        <span>Here we joined both the tables.</span><br />
        <span
          >In joins, There are 2 tables, it pick 1 row from table1 and try to
          evaluate the condition against every row of the second table.</span
        ><br />
        <span
          >But if someone read this query it’s not very easy to
          understand.</span
        >
      </p>
      <p>
        <span class="ui-comment-inline-span"
          >The above query can be solved in steps as follows</span
        ><span>:</span>
      </p>
      <ol>
        <li><span>Get psp of student with id =18.</span></li>
        <li><span>Get id of student with psp&gt; 87.</span></li>
      </ol>
      <pre><code>select psp
from students 
where id=18;
</code></pre>
      <p>
        <img
          class="emoji"
          alt=":heavy_plus_sign:"
          src="https://cdn.jsdelivr.net/npm/@hackmd/emojify.js@2.1.0/dist/images/basic/heavy_plus_sign.png"
        />
      </p>
      <pre><code>select id
from students
where psp&gt; 87;
</code></pre>
      <ol start="3">
        <li><span>Combine them together.</span></li>
      </ol>
      <pre><code>select id
from students
where psp&gt; (
select psp
from students 
where id=18);
</code></pre>
      <p>
        <strong><span>Internal working:</span></strong
        ><br />
        <span>It’s working is almost same as Select query.</span>
      </p>
      <ol>
        <li>
          <span
            >It will go to students table but here the condition is a complete
            query in itself.</span
          >
        </li>
        <li>
          <span
            >It goes to every row and then for every row it is going to execute
            that query.</span
          >
        </li>
      </ol>
      <hr />
      <p>
        <span>Let’s consider another Example,</span><br />
        <span
          >We are required to give the name of students who are TA’s as
          well,</span
        ><br />
        <img src="https://i.imgur.com/S3uoiSU.png" alt="" loading="lazy" />
      </p>
      <p><span>Joins:</span></p>
      <pre><code>select s.name
from TA t
join students s
on t.st_id=s.id;
</code></pre>
      <h2 id="Subqueries-using-Where" data-id="Subqueries-using-Where">
        <a
          class="anchor hidden-xs"
          href="#Subqueries-using-Where"
          title="Subqueries-using-Where"
          ><span class="octicon octicon-link"></span></a
        ><span>Subqueries using Where:</span>
      </h2>
      <h3 id="IN-clause" data-id="IN-clause">
        <a class="anchor hidden-xs" href="#IN-clause" title="IN-clause"
          ><span class="octicon octicon-link"></span></a
        ><span>IN clause:</span>
      </h3>
      <p>
        <span class="ui-comment-inline-span"
          >When we have to check if a value is in a list of values</span
        ><span>, we can use </span><strong><span>IN</span></strong
        ><span> clause.</span><br />
        <em><span>Now, using the same thing in above example:</span></em>
      </p>
      <pre><code>select name
from students
where id IN (
select st_id
from TA
);
</code></pre>
      <p>
        <span>This sub-</span><span class="ui-comment-inline-span">query</span
        ><span> will give the list of values.</span>
      </p>
      <p>
        <strong
          ><span>NOT IN can also be </span
          ><span class="ui-comment-inline-span"
            >used to find students who are not TAs.</span
          ></strong
        >
      </p>
      <pre><code>select name
from students
where id NOT IN (
select st_id
from TA
);
</code></pre>
      <hr />
      <h3 id="ALL-clause" data-id="ALL-clause">
        <a class="anchor hidden-xs" href="#ALL-clause" title="ALL-clause"
          ><span class="octicon octicon-link"></span></a
        ><span>ALL clause:</span>
      </h3>
      <p>
        <span>Let’s understand this with the help of an example,</span><br />
        <span
          >We are required to give students who have psp greater than every
          student of batch_id=3 from students table.</span
        ><br />
        <img src="https://i.imgur.com/RmyMuUt.png" alt="" loading="lazy" />
      </p>
      <p>
        <strong><span>Normal Subquery:</span></strong>
      </p>
      <pre><code>select *
from students
where psp &gt; (
Select MAX(psp) 
from students 
where batch_id = 3
);
</code></pre>
      <p>
        <strong><span>By using ALL clause:</span></strong>
      </p>
      <pre><code>select 
from students
where psp &gt; ALL(
select psp
from students 
where batch_id=3
)
</code></pre>
      <p>
        <strong><span>Working:</span></strong>
      </p>
      <ol>
        <li><span>Inner query is going to get multiple values.</span></li>
        <li><span>Match the condition against all values.</span></li>
        <li>
          <span
            >Only if all the conditions are matched, then only output
            that.</span
          >
        </li>
      </ol>
      <hr />
      <h3 id="ANY-clause" data-id="ANY-clause">
        <a class="anchor hidden-xs" href="#ANY-clause" title="ANY-clause"
          ><span class="octicon octicon-link"></span></a
        ><span>ANY clause:</span>
      </h3>
      <p>
        <span>Consider an example,</span><br />
        <span
          >We are required to get students who have psp greater than any student
          of batch_id=3 using above students table.</span
        >
      </p>
      <pre><code>select 
from students
where psp &gt; ANY(
select psp
from students 
where batch_id=3
)
</code></pre>
      <p>
        <strong><span>Working:</span></strong>
      </p>
      <ol>
        <li><span>Inner query is going to get multiple values.</span></li>
        <li><span>Match the condition against all values.</span></li>
        <li>
          <span
            >If any of the condition is matched, it will add that row in the
            output.</span
          >
        </li>
      </ol>
      <hr />
      <h2 id="Correlated-Subqueries" data-id="Correlated-Subqueries">
        <a
          class="anchor hidden-xs"
          href="#Correlated-Subqueries"
          title="Correlated-Subqueries"
          ><span class="octicon octicon-link"></span></a
        ><span>Correlated Subqueries:</span>
      </h2>
      <p>
        <span>Let’s say we have a problem statement,</span><br />
        <span
          >We are required to select all students who have a psp greater than
          average psp of their batch.</span
        ><br />
        <img
          src="https://hackmd.io/_uploads/rJseoIs8i.png"
          alt=""
          loading="lazy"
        />
      </p>
      <p><span>The two operations that we need to do is:</span></p>
      <pre><code>select avg(psp)
from students 
where batch_id = {If we know the batch_id}
</code></pre>
      <p>
        <span
          >Here the batch_id to be given in group by would be the batch id of
          students where psp&gt; avg(psp)</span
        >
      </p>
      <pre><code>select name
from students
where psp&gt;{Upper query}
</code></pre>
      <pre><code>SELECT name from students s
where psp &gt; (
SELECT avg(psp)
FROM students
where batch_id = s.batch_id
);

</code></pre>
      <p>
        <strong><span>Working:</span></strong>
      </p>
      <ol>
        <li>
          <span
            >Upper query selects all the rows and start analysing them 1 by
            1.</span
          >
        </li>
        <li>
          <span
            >It checks on first row and try to find whether to keep this row or
            not.</span
          >
        </li>
        <li><span>Sends the first row to the inner query.</span></li>
        <li>
          <span
            >Now inner query works and try to find the average psp of
            b_id=1.</span
          >
        </li>
        <li><span>Inner query sends the result to outer query again.</span></li>
        <li>
          <span
            >Now outer query eventually decides whether the psp is greater than
            average or not, If it is greater then selected otherwise not.</span
          >
        </li>
      </ol>
      <hr />
      <h3 id="EXISTS-clause" data-id="EXISTS-clause">
        <a class="anchor hidden-xs" href="#EXISTS-clause" title="EXISTS-clause"
          ><span class="octicon octicon-link"></span></a
        ><span>EXISTS </span><span class="ui-comment-inline-span">clause</span
        ><span>:</span>
      </h3>
      <p>
        <span
          >To understand the EXIST clause, Let us again consider the query to
          find students who are TAs.</span
        >
      </p>
      <pre><code>select *
from students s
where EXISTS (
SELECT *
from TA
where TA.st_id=s.id
)
</code></pre>
      <p>
        <span>Subquery will return TRUE even if a single row is present.</span>
      </p>
      <p>
        <span>In </span><strong><span>EXISTS</span></strong
        ><span>
          CLAUSE as soon as even a single row is returned it will return
          true.</span
        >
      </p>
      <p>
        <strong><span>EXISTS is much faster than IN clause.</span></strong>
      </p>
      <hr />
      <h3 id="Subquery-Using-Select" data-id="Subquery-Using-Select">
        <a
          class="anchor hidden-xs"
          href="#Subquery-Using-Select"
          title="Subquery-Using-Select"
          ><span class="octicon octicon-link"></span></a
        ><span>Subquery Using Select:</span>
      </h3>
      <p>
        <span>Let’s consider a students table,</span><br />
        <span>We are required to give the expected output.</span><br />
        <img src="https://i.imgur.com/c2yDL26.png" alt="" loading="lazy" />
      </p>
      <p>
        <span
          >Here, for every student we need to find average psp of his/her batch.
          So it’s kind of a query in itself.</span
        >
      </p>
      <pre><code>SELECT id, name, b_id, (SELECT avg(psp) 
from students
where b_id = s.b_id)
from students s;
</code></pre>
      <p>
        <strong><span>Working:</span></strong>
      </p>
      <ol>
        <li>
          <span
            >We are not filtering anything from outer query so all the will be
            selected from outer subquery.</span
          >
        </li>
        <li><span>The final column will come because of correlation.</span></li>
        <li>
          <span
            >All the columns are selected as it is, but when the last column has
            to be selected, the row will be send to the inner query.</span
          >
        </li>
        <li>
          <span
            >The inner query uses the batch_id as 1, take the average and return
            the average to outer query.</span
          >
        </li>
        <li><span>Finally outer query selects the average as well.</span></li>
      </ol>
      <h3 id="Subquery-Using-From" data-id="Subquery-Using-From">
        <a
          class="anchor hidden-xs"
          href="#Subquery-Using-From"
          title="Subquery-Using-From"
          ><span class="octicon octicon-link"></span></a
        ><span>Subquery Using From:</span>
      </h3>
      <p>
        <span>In th</span
        ><span class="ui-comment-inline-span"
          >is type of subquery we use a subquery in from claus</span
        ><span>e.</span>
      </p>
      <p>
        <span
          >For this let’s take 3 tables, students, batches and
          instructors.</span
        ><br />
        <img src="https://i.imgur.com/bwFW54t.png" alt="" loading="lazy" />
      </p>
      <p>
        <span>Expected output:</span><br />
        <img
          src="https://hackmd.io/_uploads/Hys_p8s8o.png"
          alt=""
          loading="lazy"
        />
      </p>
      <pre><code>select s.name as s_name,b_id as b.id,i.name as ins_name
from students s
join batches b
on s.b_id=b.id
join instructors i
on b.ins_id=i.ins_id;
</code></pre>
      <p>
        <span>Let’s consider the output of above q</span
        ><span class="ui-comment-inline-span">uery as table </span
        ><strong><span class="ui-comment-inline-span">t</span></strong
        ><span>.</span><br />
        <img
          src="https://hackmd.io/_uploads/Byh0CLo8s.png"
          alt=""
          loading="lazy"
        />
      </p>
      <p>
        <span>Consid</span><span class="ui-comment-inline-span">er </span
        ><strong><span>t</span></strong
        ><span> as an input and now we want to output as follow,</span><br />
        <img
          src="https://hackmd.io/_uploads/S1UmkDjLi.png"
          alt=""
          loading="lazy"
        />
      </p>
      <pre><code>select s_name, ins_name
from t;
</code></pre>
      <p>
        <strong><span>t</span></strong
        ><span> is nothing but output of the above query,</span>
      </p>
      <p>
        <em
          ><span>select</span><br />
          <span>from (complete query here)</span></em
        >
      </p>
      <pre><code>select t.s_name, t.ins_name
from (
select s.name as s_name, b.id as b_id,i.name as ins_name
from students s
join batches b
on s.b_id=b.id
join instructors i
on b.ins_id=i.ins_id
) t;
</code></pre>
      <hr />
      <h2 id="VIEWS" data-id="VIEWS">
        <a class="anchor hidden-xs" href="#VIEWS" title="VIEWS"
          ><span class="octicon octicon-link"></span></a
        ><span>VIEWS:</span>
      </h2>
      <ul>
        <li><span>Views are kind of an abstraction over real tables.</span></li>
        <li>
          <span
            >They will provide a visibility to data that we want to
            provide.</span
          >
        </li>
        <li>
          <span>It act like tables while no data is actually stored in </span
          ><span class="ui-comment-inline-span">them</span><span>.</span>
        </li>
        <li><span>Views are actually queries stored in the system.</span></li>
      </ul>
      <p>
        <span
          >Let us consider an example from our shared sample databases in the
          mysql workbench:</span
        >
      </p>
      <p>
        <span>There is a orders table,</span><br />
        <img
          src="https://hackmd.io/_uploads/HyIvFrs8s.png"
          alt=""
          loading="lazy"
        />
      </p>
      <p>
        <span>Customers table,</span><br />
        <img
          src="https://hackmd.io/_uploads/HyzOKHiLi.png"
          alt=""
          loading="lazy"
        />
      </p>
      <p>
        <span>order_items table:</span><br />
        <img
          src="https://hackmd.io/_uploads/SJUoFSj8j.png"
          alt=""
          loading="lazy"
        />
      </p>
      <p>
        <span>Products table:</span><br />
        <img
          src="https://hackmd.io/_uploads/B1V3FroUj.png"
          alt=""
          loading="lazy"
        />
      </p>
      <p>
        <span
          >We are required to give these columns, order_id, order_date,
          customer_id, first_name, points,</span
        ><br />
        <span>product_id, product_name, unit_price, quantity.</span>
      </p>
      <pre><code>select db.order_id, db.first_name from 
(select o.order_id, o.order_date, o.customer_id, c.first_name, c.points,
p.product_id, p.name, p.unit_price, oi.quantity
from orders o
join customers c
using(customer_id)
join order_items oi
using(order_id)
join products
using(product_id)) as db;
</code></pre>
      <p>
        <span
          >Let’s say we have shared this table with the organisation, multiple
          different business analyst use this query for multiple purposes.</span
        ><br />
        <span
          >Now the code of this query will get repeated across multiple filies
          in the system.</span
        ><br />
        <span
          >What happens is after few days we change the name of columns or
          something in these tables so it will have to be changed in all the
          places which is not good, the query will start breaking.</span
        >
      </p>
      <p><span>Therefore we can create an illusion/View of a table,</span></p>
      <pre><code>Create view order_product_customers as
select o.order_id, o.order_date, o.customer_id, c.first_name, c.points,
p.product_id, p.name, p.unit_price, oi.quantity
from sql_store.orders o
join sql_store.customers c
using(customer_id)
join sql_store.order_items oi
using(order_id)
join sql_store.products
using(product_id);
</code></pre>
      <p>
        <span class="ui-comment-inline-span"
          >Now everyone can get data via a simpler query like SELECT * FROM
          order_product_customers.</span
        ><br />
        <span class="ui-comment-inline-span"
          >We don’t need to give people access to original table.</span
        >
      </p>
      <p>
        <span
          >Now if someone need to make a change in the table just write
          this,</span
        >
      </p>
      <p>
        <span>create or replace view as</span><br />
        <span>{paste the new query}</span><br />
        <span
          >It’s kind of a centralised place where we put the query and the only
          place we need to make the changes is in that particular central
          space.</span
        >
      </p>
      <p>
        <strong
          ><span
            >View is like a table but it is not storing any data.</span
          ></strong
        >
      </p>
      <p><span>Now, Let’s see CRUD operations in Views:</span></p>
      <ul>
        <li><span>Read</span></li>
      </ul>
      <pre><code>select opc.order_id, opc.firstname
from sql_store.order_product_customer opc;
</code></pre>
      <ul>
        <li><span>Update:</span></li>
      </ul>
      <pre><code>update sql_store.order_product_customer opc 
set opc.first_name = 'naman'
where opc.order_id=1;
</code></pre>
      <p>
        <span class="ui-comment-inline-span">It succeed</span
        ><span>s but it changes the original customers table as well.</span>
      </p>
      <p>
        <strong
          ><span
            >Views also can allow update on the internal tables</span
          ></strong
        ><br />
        <span
          >If we dont want that, Do ensure that whenever we create a view do set
          the restrictions on the view.</span
        >
      </p>
      <p>
        <span>Now, Can we also create a row using views?</span><br />
        <span>Actually it depends.</span>
      </p>
      <ul>
        <li>
          <span
            >Create is only possible if we want to create in a single
            table.</span
          >
        </li>
        <li><span>Mostly views are only used to do a read.</span></li>
        <li>
          <span
            >It is advisable to not use views for creating, updating or deleting
            rows. They a</span
          ><span class="ui-comment-inline-span"
            >re generally for read purposes.</span
          >
        </li>
      </ul>
      <hr />
      <p><span>Let’s consider a scenerio.</span></p>
      <p>
        <span
          >Consider the Placement policy of scaler where if a student psp&gt;=80
          he/she is eligible for placement else not.</span
        >
      </p>
      <p>
        <span
          >Here we have a students table and we are required to give the
          expected output.</span
        ><br />
        <img
          src="https://hackmd.io/_uploads/rJbbJIjLo.png"
          alt=""
          loading="lazy"
        />
      </p>
      <p>
        <span>We are required to give a yes if psp&gt;=80, output=yes</span
        ><br />
        <span>else output=no.</span>
      </p>
      <h2 id="IF-clause" data-id="IF-clause">
        <a class="anchor hidden-xs" href="#IF-clause" title="IF-clause"
          ><span class="octicon octicon-link"></span></a
        ><span>IF clause:</span>
      </h2>
      <p>
        <em><span>if(condition ,valueontrue, valueonfalse)</span></em>
      </p>
      <pre><code>select id,name, if(psp&gt;=80, "yes","no") as eligible_for_placements
from students;
</code></pre>
      <p><span>Let’s consider another example,</span></p>
      <p><span>Now we want priority order of placements.</span></p>
      <p>
        <span>If someone has:</span><br />
        <em
          ><span>80%+: PO</span><br />
          <span>[60-80): P1</span><br />
          <span>&lt;60: P2</span></em
        >
      </p>
      <p>
        <span>Expected output:</span><br />
        <img
          src="https://hackmd.io/_uploads/ryMH-8sLi.png"
          alt=""
          loading="lazy"
        />
      </p>
      <h2 id="Case-clause" data-id="Case-clause">
        <a class="anchor hidden-xs" href="#Case-clause" title="Case-clause"
          ><span class="octicon octicon-link"></span></a
        ><span>Case clause:</span>
      </h2>
      <p>
        <strong><span>Syntax:</span></strong
        ><br />
        <span>CASE</span><br />
        <span>WHEN {condition} THEN {output}</span><br />
        <span>WHEN {condition} THEN {output}</span><br />
        <span>WHEN {condition} THEN {output}</span><br />
        <span>ELSE {output}</span><br />
        <span>END as {name}</span>
      </p>
      <pre><code>select id,name,
case
when psp&gt;=80 then "P0"
when psp&gt;=60 then "P1"
else "P2"
end as placement_priority 
from students;
</code></pre>
      <hr />
      <h2 id="IFNULL-clause" data-id="IFNULL-clause">
        <a class="anchor hidden-xs" href="#IFNULL-clause" title="IFNULL-clause"
          ><span class="octicon octicon-link"></span></a
        ><span>IFNULL clause:</span>
      </h2>
      <p>
        <span
          >Sometimes the condition can be, If a column has NULL value, Output
          something else.</span
        >
      </p>
      <p>
        <span>For Example,</span><br />
        <span
          >We are required to give the psp of every students but (some students
          may have psp NULL).</span
        ><br />
        <span>if psp is NULL put their psp as 0.</span>
      </p>
      <pre><code>select IFNULL(psp,0)
from students;
</code></pre>
      <p>
        <strong><span>Working:</span></strong
        ><br />
        <span
          >If the psp is not null then it will output the value of psp else
          output the value as </span
        ><strong><span>0</span></strong
        ><span> .</span>
      </p>
      <p>
        <span>Let’s consider another scenerio,</span><br />
        <span
          >Here we want to get the psp of every student but if the psp is NULL,
          output number of assignments questions solved, if it is also NULL
          output number of homework questions solved else output 0.</span
        >
      </p>
      <p>
        <code
          >ifnull(psp, ifnull(assignments_questions,
          ifnull(homework_questions,0)))</code
        >
      </p>
      <h2 id="COALESCE-clause" data-id="COALESCE-clause">
        <a
          class="anchor hidden-xs"
          href="#COALESCE-clause"
          title="COALESCE-clause"
          ><span class="octicon octicon-link"></span></a
        ><span>COALESCE clause:</span>
      </h2>
      <p>
        <strong><span>Stack of NULL checks.</span></strong
        ><br />
        <code>coalesce(psp,assn,hw,0);</code>
      </p>
      <p>
        <span>It checks for the series of condition,</span><br />
        <span
          >Here if psp is null go to assignment similarly if assignment is also
          null, check for HW then at last if HW is also null put 0.</span
        >
      </p>
      <pre><code>select id,name, coalesce(psp,assgn,hw,0)
from students;
</code></pre>
      <hr />
      <hr />
    </div>
    <div class="ui-toc dropup unselectable hidden-print" style="display: none">
      <div class="pull-right dropdown">
        <a
          id="tocLabel"
          class="ui-toc-label btn btn-default"
          data-toggle="dropdown"
          href="#"
          role="button"
          aria-haspopup="true"
          aria-expanded="false"
          title="Table of content"
        >
          <i class="fa fa-bars"></i>
        </a>
        <ul
          id="ui-toc"
          class="ui-toc-dropdown dropdown-menu"
          aria-labelledby="tocLabel"
        >
          <div class="toc">
            <ul class="nav">
              <li>
                <a
                  href="#DBMS-Lecture-9--Subqueries"
                  title="DBMS Lecture 9- Subqueries:"
                  >Subqueries</a
                >
                <ul class="nav">
                  <li>
                    <a
                      href="#Introduction-to-Subqueries"
                      title="Introduction to Subqueries:"
                      >Introduction to Subqueries</a
                    >
                  </li>
                  <li>
                    <a
                      href="#Subqueries-using-Where"
                      title="Subqueries using Where:"
                      >Subqueries using Where:</a
                    >
                    <ul class="nav">
                      <li>
                        <a href="#IN-clause" title="IN clause">IN clause</a>
                      </li>
                      <li>
                        <a href="#ALL-clause" title="ALL clause">ALL clause</a>
                      </li>
                      <li>
                        <a href="#ANY-clause" title="ANY clause">ANY clause</a>
                      </li>
                    </ul>
                  </li>
                  <li>
                    <a
                      href="#Correlated-Subqueries"
                      title="Correlated Subqueries:"
                      >Correlated Subqueries:</a
                    >
                    <ul class="nav">
                      <li>
                        <a href="#EXISTS-clause" title="EXISTS clause"
                          >EXISTS clause</a
                        >
                      </li>
                      <li>
                        <a
                          href="#Subquery-Using-Select"
                          title="Subquery Using Select"
                          >Subquery Using Select</a
                        >
                      </li>
                      <li>
                        <a
                          href="#Subquery-Using-From"
                          title="Subquery Using From"
                          >Subquery Using From</a
                        >
                      </li>
                    </ul>
                  </li>
                  <li><a href="#VIEWS" title="VIEWS">VIEWS</a></li>
                  <li>
                    <a href="#IF-clause" title="IF clause">IF clause</a>
                  </li>
                  <li>
                    <a href="#Case-clause" title="Case clause">Case clause</a>
                  </li>
                  <li>
                    <a href="#IFNULL-clause" title="IFNULL clause"
                      >IFNULL clause</a
                    >
                  </li>
                  <li>
                    <a href="#COALESCE-clause" title="COALESCE clause"
                      >COALESCE clause</a
                    >
                  </li>
                </ul>
              </li>
            </ul>
          </div>
          <div class="toc-menu">
            <a class="expand-toggle" href="#">Expand all</a
            ><a class="back-to-top" href="#">Back to top</a
            ><a class="go-to-bottom" href="#">Go to bottom</a
            ><a class="go-to-homepage" href="../index.html">Homepage</a>
          </div>
        </ul>
      </div>
    </div>
    <div
      id="ui-toc-affix"
      class="ui-affix-toc ui-toc-dropdown unselectable hidden-print"
      data-spy="affix"
      style="top: 17px; display: none"
      null
      null
    >
      <div class="toc">
        <ul class="nav">
          <li>
            <a
              href="#DBMS-Lecture-9--Subqueries"
              title="DBMS Lecture 9- Subqueries:"
              >Subqueries</a
            >
            <ul class="nav">
              <li>
                <a
                  href="#Introduction-to-Subqueries"
                  title="Introduction to Subqueries:"
                  >Introduction to Subqueries</a
                >
              </li>
              <li>
                <a
                  href="#Subqueries-using-Where"
                  title="Subqueries using Where:"
                  >Subqueries using Where:</a
                >
                <ul class="nav">
                  <li>
                    <a href="#IN-clause" title="IN clause">IN clause</a>
                  </li>
                  <li>
                    <a href="#ALL-clause" title="ALL clause">ALL clause</a>
                  </li>
                  <li>
                    <a href="#ANY-clause" title="ANY clause">ANY clause</a>
                  </li>
                </ul>
              </li>
              <li>
                <a href="#Correlated-Subqueries" title="Correlated Subqueries:"
                  >Correlated Subqueries:</a
                >
                <ul class="nav">
                  <li>
                    <a href="#EXISTS-clause" title="EXISTS clause"
                      >EXISTS clause</a
                    >
                  </li>
                  <li>
                    <a
                      href="#Subquery-Using-Select"
                      title="Subquery Using Select"
                      >Subquery Using Select</a
                    >
                  </li>
                  <li>
                    <a href="#Subquery-Using-From" title="Subquery Using From"
                      >Subquery Using From</a
                    >
                  </li>
                </ul>
              </li>
              <li><a href="#VIEWS" title="VIEWS">VIEWS</a></li>
              <li>
                <a href="#IF-clause" title="IF clause">IF clause</a>
              </li>
              <li>
                <a href="#Case-clause" title="Case clause">Case clause</a>
              </li>
              <li>
                <a href="#IFNULL-clause" title="IFNULL clause">IFNULL clause</a>
              </li>
              <li>
                <a href="#COALESCE-clause" title="COALESCE clause"
                  >COALESCE clause</a
                >
              </li>
            </ul>
          </li>
        </ul>
      </div>
      <div class="toc-menu">
        <a class="expand-toggle" href="#">Expand all</a
        ><a class="back-to-top" href="#">Back to top</a
        ><a class="go-to-bottom" href="#">Go to bottom</a
        ><a class="go-to-homepage" href="../index.html">Homepage</a>
      </div>
    </div>
    <script
      src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.1.1/jquery.min.js"
      integrity="sha256-hVVnYaiADRTO2PzUGmuLJr8BLUSjGIZsDYGmIJLv2b8="
      crossorigin="anonymous"
    ></script>
    <script
      src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.3.7/js/bootstrap.min.js"
      integrity="sha256-U5ZEeKfGNOja007MMD3YBI0A3OSZOQbeG6z2f2Y0hu8="
      crossorigin="anonymous"
      defer
    ></script>
    <script
      src="https://cdnjs.cloudflare.com/ajax/libs/gist-embed/2.6.0/gist-embed.min.js"
      integrity="sha256-KyF2D6xPIJUW5sUDSs93vWyZm+1RzIpKCexxElmxl8g="
      crossorigin="anonymous"
      defer
    ></script>
    <script>
      var markdown = $(".markdown-body")
      //smooth all hash trigger scrolling
      function smoothHashScroll() {
        var hashElements = $("a[href^='#']").toArray()
        for (var i = 0; i < hashElements.length; i++) {
          var element = hashElements[i]
          var $element = $(element)
          var hash = element.hash
          if (hash) {
            $element.on("click", function (e) {
              // store hash
              var hash = this.hash
              if ($(hash).length <= 0) return
              // prevent default anchor click behavior
              e.preventDefault()
              // animate
              $("body, html")
                .stop(true, true)
                .animate(
                  {
                    scrollTop: $(hash).offset().top,
                  },
                  100,
                  "linear",
                  function () {
                    // when done, add hash to url
                    // (default click behaviour)
                    window.location.hash = hash
                  }
                )
            })
          }
        }
      }

      smoothHashScroll()
      var toc = $(".ui-toc")
      var tocAffix = $(".ui-affix-toc")
      var tocDropdown = $(".ui-toc-dropdown")
      //toc
      tocDropdown.click(function (e) {
        e.stopPropagation()
      })

      var enoughForAffixToc = true

      function generateScrollspy() {
        $(document.body).scrollspy({
          target: "",
        })
        $(document.body).scrollspy("refresh")
        if (enoughForAffixToc) {
          toc.hide()
          tocAffix.show()
        } else {
          tocAffix.hide()
          toc.show()
        }
        $(document.body).scroll()
      }

      function windowResize() {
        //toc right
        var paddingRight = parseFloat(markdown.css("padding-right"))
        var right =
          $(window).width() -
          (markdown.offset().left + markdown.outerWidth() - paddingRight)
        toc.css("right", right + "px")
        //affix toc left
        var newbool
        var rightMargin =
          (markdown.parent().outerWidth() - markdown.outerWidth()) / 2
        //for ipad or wider device
        if (rightMargin >= 133) {
          newbool = true
          var affixLeftMargin = (tocAffix.outerWidth() - tocAffix.width()) / 2
          var left =
            markdown.offset().left + markdown.outerWidth() - affixLeftMargin
          tocAffix.css("left", left + "px")
        } else {
          newbool = false
        }
        if (newbool != enoughForAffixToc) {
          enoughForAffixToc = newbool
          generateScrollspy()
        }
      }
      $(window).resize(function () {
        windowResize()
      })
      $(document).ready(function () {
        windowResize()
        generateScrollspy()
      })

      //remove hash
      function removeHash() {
        window.location.hash = ""
      }

      var backtotop = $(".back-to-top")
      var gotobottom = $(".go-to-bottom")

      backtotop.click(function (e) {
        e.preventDefault()
        e.stopPropagation()
        if (scrollToTop) scrollToTop()
        removeHash()
      })
      gotobottom.click(function (e) {
        e.preventDefault()
        e.stopPropagation()
        if (scrollToBottom) scrollToBottom()
        removeHash()
      })

      var toggle = $(".expand-toggle")
      var tocExpand = false

      checkExpandToggle()
      toggle.click(function (e) {
        e.preventDefault()
        e.stopPropagation()
        tocExpand = !tocExpand
        checkExpandToggle()
      })

      function checkExpandToggle() {
        var toc = $(".ui-toc-dropdown .toc")
        var toggle = $(".expand-toggle")
        if (!tocExpand) {
          toc.removeClass("expand")
          toggle.text("Expand all")
        } else {
          toc.addClass("expand")
          toggle.text("Collapse all")
        }
      }

      function scrollToTop() {
        $("body, html").stop(true, true).animate(
          {
            scrollTop: 0,
          },
          100,
          "linear"
        )
      }

      function scrollToBottom() {
        $("body, html")
          .stop(true, true)
          .animate(
            {
              scrollTop: $(document.body)[0].scrollHeight,
            },
            100,
            "linear"
          )
      }
    </script>
  </body>
</html>
